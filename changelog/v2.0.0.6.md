# v2.0.0.6

> Part of [OpenCode Dev Environment](https://github.com/MichelKerkmeester/opencode-spec-kit-framework)

---

## [**2.0.0.6**] - 2026-02-12

**Spec Kit Script Automation — Dead Code, Bugs, DRY & Docs** — Comprehensive audit of all non-MCP scripts in `system-spec-kit`. Removed 8 dead exports, fixed 4 bugs, consolidated 3 DRY violations, improved 4 automation gaps, and corrected 6 README inaccuracies. Total: ~120 LOC removed, 0 behavioral changes to working features.

> Spec folder: `anobel.com/.opencode/specs/003-memory-and-spec-kit/109-spec-kit-script-automation/` (Level 3+)

---

### Changed

1. **DRY Consolidation** — `workflow.ts` now imports `validateNoLeakedPlaceholders` and `validateAnchors` from `validation-utils.ts` instead of maintaining inline copies. Hardcoded archive regex replaced with `isArchiveFolder()` helper from `folder-detector.ts`. Error messaging extracted to `printNoSpecFolderError()` helper
2. **`cleanup-orphaned-vectors.ts`** — Added `--dry-run` and `--help` flags for safer operation. Added `require.main` guard to prevent accidental execution on import
3. **`config.ts`** — Added `validateConfig()` function for runtime configuration validation

### Fixed

4. **Dead Code Removed** — 8 dead exports from `workflow.ts` (`generateContextMemory`, `WorkflowResult`, `ContextMemoryOptions`, `GenerateContextResult`, `processConversation`, `ProcessConversationOptions`, `generateMarkdown`, `GenerateMarkdownOptions`), dead `existingDirs` variable from `directory-setup.ts`, dead `SpecFolderInfo` export from `folder-detector.ts`, dead `loadConfig` from `config.ts` + barrel, vestigial `initializeDataLoaders()` lazy loading pattern, dead exports from `alignment-validator.ts` barrel
5. **`data-loader.ts` Marker Inconsistency** — `_source` and `_isSimulation` markers were applied inconsistently across loading paths. Standardized to consistent application
6. **`workflow.ts` Section Numbering** — Heading `## 5. Quality & Relevance Score` collided with existing section 5. Renumbered to `## 6.`
7. **`rank-memories.ts` Import Path** — Fixed broken import path that prevented standalone execution
8. **README Inaccuracies** — Corrected 6 README files in `scripts/core/`, `scripts/renderers/`, `scripts/loaders/`, `templates/` with wrong function signatures, missing exports, stale file counts, and incorrect descriptions

---

**Build:** `tsc --build --force` PASS (0 errors) · **Tests:** 3,872 passing, 0 failures

**Files:** `scripts/core/workflow.ts` · `scripts/core/config.ts` · `scripts/core/directory-setup.ts` · `scripts/memory/cleanup-orphaned-vectors.ts` · `scripts/memory/rank-memories.ts` · `scripts/loaders/data-loader.ts` · `scripts/spec-folder/folder-detector.ts` · `scripts/utils/validation-utils.ts` · `shared/index.ts` · `scripts/core/README.md` · `scripts/renderers/README.md` · `scripts/loaders/README.md` · `templates/README.md` · `scripts/alignment/README.md` · `scripts/extractors/README.md`

---

*For full release history, see the [global CHANGELOG](../CHANGELOG.md).*
