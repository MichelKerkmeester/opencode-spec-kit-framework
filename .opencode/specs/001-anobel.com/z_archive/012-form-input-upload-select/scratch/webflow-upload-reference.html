<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Webflow Upload Structure Reference</title>
  <style>
    * { box-sizing: border-box; }
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: #1a1a2e;
      color: #eee;
      padding: 2rem;
      margin: 0;
      line-height: 1.6;
    }
    .container { max-width: 900px; margin: 0 auto; }
    h1 { color: #fff; border-bottom: 2px solid #06458C; padding-bottom: 0.5rem; }
    h2 { color: #06458C; margin-top: 2rem; }
    h3 { color: #888; font-size: 0.875rem; text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 0.5rem; }

    .warning {
      background: #dc2626;
      color: white;
      padding: 1rem;
      border-radius: 8px;
      margin: 1rem 0;
    }
    .success {
      background: #16a34a;
      color: white;
      padding: 1rem;
      border-radius: 8px;
      margin: 1rem 0;
    }
    .info {
      background: #06458C;
      color: white;
      padding: 1rem;
      border-radius: 8px;
      margin: 1rem 0;
    }

    /* Structure diagram */
    .structure {
      background: #16213e;
      border: 1px solid #333;
      border-radius: 8px;
      padding: 1.5rem;
      font-family: 'Monaco', 'Menlo', monospace;
      font-size: 0.875rem;
      overflow-x: auto;
    }
    .structure .el { color: #ff6b6b; }
    .structure .attr { color: #4ecdc4; }
    .structure .val { color: #ffe66d; }
    .structure .comment { color: #666; }
    .structure .required { color: #06458C; font-weight: bold; }

    /* Live demo section */
    .demo-section {
      background: #fff;
      border-radius: 12px;
      padding: 2rem;
      margin: 2rem 0;
      color: #333;
    }

    /* Table */
    table {
      width: 100%;
      border-collapse: collapse;
      margin: 1rem 0;
      font-size: 0.875rem;
    }
    th, td {
      padding: 0.75rem;
      text-align: left;
      border: 1px solid #333;
    }
    th { background: #16213e; color: #fff; }
    td { background: #0f0f23; }
    code {
      background: #333;
      padding: 0.125rem 0.375rem;
      border-radius: 4px;
      font-size: 0.8125rem;
    }

    /* ═══════════════════════════════════════════════════════════════
       ACTUAL WEBFLOW COMPONENT STYLES
       Copy these class names exactly in Webflow
    ═══════════════════════════════════════════════════════════════ */

    .input--container {
      margin-bottom: 1.5rem;
    }

    .input--header {
      margin-bottom: 0.5rem;
    }

    .input--label {
      font-size: 0.875rem;
      font-weight: 600;
      color: #1f2937;
    }

    .input--file-upload {
      position: relative;
      background: #fff;
      border: 1.5px solid #CFCFCF;
      border-radius: 0.75rem;
      padding: 1.5rem;
      min-height: 9rem;
      cursor: pointer;
      transition: border-color 0.2s ease;
    }

    .input--file-upload:hover {
      border-color: #06458C;
    }

    /* Hidden file input - MUST be hidden but functional */
    .input.is--upload {
      position: absolute;
      width: 1px;
      height: 1px;
      opacity: 0;
      pointer-events: none;
    }

    /* ═══════════════════════════════════════════════════════════════
       IDLE VIEW (upload--content)
    ═══════════════════════════════════════════════════════════════ */

    .upload--content {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      min-height: 5rem;
    }

    .label--decorative {
      width: 40px;
      height: 40px;
      border: 1.5px solid #CFCFCF;
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 0.75rem;
      background: #FEFEFE;
    }

    .label--decorative .icon {
      width: 20px;
      height: 20px;
      color: #06458C;
    }

    .sub-heading.is--upload {
      font-size: 1rem;
      font-weight: 600;
      color: #374151;
    }

    .upload--browse {
      color: #06458C;
      text-decoration: underline;
      text-underline-offset: 2px;
      cursor: pointer;
      font-weight: 600;
    }

    .input--description {
      font-size: 0.875rem;
      color: #979797;
      margin-top: 0.5rem;
    }

    /* ═══════════════════════════════════════════════════════════════
       UPLOADING/COMPLETE VIEW (upload--loader)
    ═══════════════════════════════════════════════════════════════ */

    .upload--loader {
      display: none; /* Hidden by default, shown via JS */
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 5rem;
    }

    .upload--filename {
      font-size: 0.875rem;
      font-weight: 600;
      color: #1f2937;
      margin-bottom: 0.75rem;
      text-align: center;
      max-width: 100%;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }

    .upload--progress-w {
      position: relative;
      width: 100%;
      height: 6px;
      background: #e5e7eb;
      border-radius: 999px;
      margin-bottom: 0.75rem;
      overflow: hidden;
    }

    .upload--progress-bar {
      position: absolute;
      top: 0;
      left: 0;
      height: 100%;
      width: 0%;
      background: #06458C;
      border-radius: 999px;
      transition: width 0.3s ease-out;
    }

    .upload--details {
      display: flex;
      align-items: center;
      justify-content: space-between;
      width: 100%;
      font-size: 0.875rem;
    }

    .upload--details-left {
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .upload--percentage {
      font-weight: 600;
      color: #1f2937;
    }

    .upload--divider {
      color: #CFCFCF;
    }

    .upload--size {
      color: #979797;
    }

    .upload--notice {
      color: #979797;
      cursor: pointer;
    }

    .upload--notice:hover {
      color: #374151;
    }

    /* ═══════════════════════════════════════════════════════════════
       STATE CLASSES (Applied by JS to wrapper)
    ═══════════════════════════════════════════════════════════════ */

    /* UPLOADING: Show loader, hide content */
    .input--file-upload.is--uploading .upload--content,
    .input--container.is--uploading .upload--content {
      display: none;
    }
    .input--file-upload.is--uploading .upload--loader,
    .input--container.is--uploading .upload--loader {
      display: flex;
    }

    /* COMPLETE: Show loader, hide content, success bg */
    .input--file-upload.is--complete .upload--content,
    .input--container.is--complete .upload--content {
      display: none;
    }
    .input--file-upload.is--complete .upload--loader,
    .input--container.is--complete .upload--loader {
      display: flex;
    }
    .input--file-upload.is--complete,
    .input--container.is--complete .input--file-upload {
      background: #f0fdf4;
      border-color: transparent;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Webflow File Upload - Structure Reference</h1>

    <div class="warning">
      <strong>THE PROBLEM:</strong> Your current structure has <code>&lt;file&gt;</code> tag with content/loader NESTED inside.
      Browsers drop these because <code>&lt;input&gt;</code> is a void element (cannot have children).
    </div>

    <div class="success">
      <strong>THE SOLUTION:</strong> Content and loader must be <strong>SIBLINGS</strong> of the input, not children.
    </div>

    <!-- ═══════════════════════════════════════════════════════════════
         WEBFLOW NAVIGATOR STRUCTURE
    ═══════════════════════════════════════════════════════════════ -->

    <h2>Webflow Navigator Structure</h2>
    <p>Build this exact hierarchy in Webflow Designer:</p>

    <div class="structure">
<pre>
<span class="el">input--container</span> <span class="comment">(div)</span> <span class="required">[data-file-upload="wrapper"]</span>
│
├── <span class="el">input--header</span> <span class="comment">(div)</span>
│   └── <span class="el">input--label</span> <span class="comment">(label)</span> → "CV"
│
├── <span class="el">input--file-upload</span> <span class="comment">(div)</span>
│   │
│   ├── <span class="el">input</span> <span class="comment">(input type="file")</span> <span class="required">[data-file-upload="input"]</span> <span class="comment">← SIBLING!</span>
│   │
│   ├── <span class="el">upload--content</span> <span class="comment">(div)</span> <span class="required">[data-file-upload="content"]</span> <span class="comment">← SIBLING!</span>
│   │   ├── <span class="el">label--decorative</span> <span class="comment">(div)</span>
│   │   │   └── <span class="el">icon</span> <span class="comment">(div with SVG)</span>
│   │   ├── <span class="el">sub-heading is--upload</span> <span class="comment">(div)</span>
│   │   │   ├── <span class="comment">"Drag & drop your file or "</span>
│   │   │   └── <span class="el">upload--browse</span> <span class="comment">(link)</span> <span class="required">[data-file-upload="browse"]</span> → "Browse"
│   │   └── <span class="el">input--description</span> <span class="comment">(div)</span> <span class="required">[data-file-upload="description"]</span>
│   │       └── <span class="comment">"Max 5 MB: PDF, DOC, DOCX"</span>
│   │
│   └── <span class="el">upload--loader</span> <span class="comment">(div)</span> <span class="required">[data-file-upload="loader"]</span> <span class="comment">← SIBLING!</span>
│       ├── <span class="el">label--decorative</span> <span class="comment">(div)</span>
│       │   └── <span class="el">icon</span> <span class="comment">(div with SVG)</span>
│       ├── <span class="el">upload--filename</span> <span class="comment">(div)</span> <span class="required">[data-file-upload="uploading"]</span>
│       │   └── <span class="comment">"Uploading..."</span>
│       ├── <span class="el">upload--progress-w</span> <span class="comment">(div)</span>
│       │   └── <span class="el">upload--progress-bar</span> <span class="comment">(div)</span> <span class="required">[data-file-upload="progress-bar"]</span>
│       └── <span class="el">upload--details</span> <span class="comment">(div)</span>
│           ├── <span class="el">upload--details-left</span> <span class="comment">(div)</span>
│           │   ├── <span class="el">upload--percentage</span> <span class="comment">(span)</span> <span class="required">[data-file-upload="percentage"]</span> → "0%"
│           │   ├── <span class="el">upload--divider</span> <span class="comment">(span)</span> → "|"
│           │   └── <span class="el">upload--size</span> <span class="comment">(span)</span> <span class="required">[data-file-upload="size"]</span> → "0B of 0B"
│           └── <span class="el">upload--notice</span> <span class="comment">(span)</span> <span class="required">[data-file-upload="notice"]</span> → "Click to undo"
│
└── <span class="el">input</span> <span class="comment">(hidden input)</span> <span class="required">[data-file-upload="url"]</span> name="cv_url"
</pre>
    </div>

    <!-- ═══════════════════════════════════════════════════════════════
         DATA ATTRIBUTES TABLE
    ═══════════════════════════════════════════════════════════════ -->

    <h2>Required Data Attributes</h2>

    <table>
      <thead>
        <tr>
          <th>Attribute</th>
          <th>Element</th>
          <th>Purpose</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><code>data-file-upload="wrapper"</code></td>
          <td>input--container</td>
          <td>Root container. Also add: <code>data-upload-endpoint</code>, <code>data-max-size</code>, <code>data-accepted-types</code></td>
        </tr>
        <tr>
          <td><code>data-file-upload="input"</code></td>
          <td>input (file)</td>
          <td>The actual file input. FilePond attaches here.</td>
        </tr>
        <tr>
          <td><code>data-file-upload="content"</code></td>
          <td>upload--content</td>
          <td>IDLE VIEW - visible by default, hidden when uploading</td>
        </tr>
        <tr>
          <td><code>data-file-upload="browse"</code></td>
          <td>upload--browse (link)</td>
          <td>Triggers file picker when clicked</td>
        </tr>
        <tr>
          <td><code>data-file-upload="loader"</code></td>
          <td>upload--loader</td>
          <td>UPLOAD VIEW - hidden by default, shown when uploading</td>
        </tr>
        <tr>
          <td><code>data-file-upload="uploading"</code></td>
          <td>upload--filename</td>
          <td>Shows "Uploading..." then filename when complete</td>
        </tr>
        <tr>
          <td><code>data-file-upload="progress-bar"</code></td>
          <td>upload--progress-bar</td>
          <td>Progress fill - JS sets <code>style.width</code></td>
        </tr>
        <tr>
          <td><code>data-file-upload="percentage"</code></td>
          <td>upload--percentage</td>
          <td>Shows "40%" during upload</td>
        </tr>
        <tr>
          <td><code>data-file-upload="size"</code></td>
          <td>upload--size</td>
          <td>Shows "178MB of 445MB" or just "445MB" when complete</td>
        </tr>
        <tr>
          <td><code>data-file-upload="notice"</code></td>
          <td>upload--notice</td>
          <td>"Click to undo" during upload, "Click to delete" when complete</td>
        </tr>
        <tr>
          <td><code>data-file-upload="url"</code></td>
          <td>hidden input</td>
          <td>Stores uploaded file URL for form submission</td>
        </tr>
      </tbody>
    </table>

    <!-- ═══════════════════════════════════════════════════════════════
         WRAPPER ATTRIBUTES
    ═══════════════════════════════════════════════════════════════ -->

    <h2>Wrapper Configuration Attributes</h2>

    <div class="info">
      Add these to the <code>input--container</code> element (the wrapper):
    </div>

    <table>
      <thead>
        <tr>
          <th>Attribute</th>
          <th>Example Value</th>
          <th>Purpose</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><code>data-file-upload</code></td>
          <td><code>wrapper</code></td>
          <td>Identifies this as a file upload component</td>
        </tr>
        <tr>
          <td><code>data-upload-endpoint</code></td>
          <td><code>https://r2-upload-proxy.cloudflare-decorated911.workers.dev</code></td>
          <td>Upload server URL</td>
        </tr>
        <tr>
          <td><code>data-max-size</code></td>
          <td><code>5MB</code></td>
          <td>Maximum file size</td>
        </tr>
        <tr>
          <td><code>data-accepted-types</code></td>
          <td><code>application/pdf,.doc,.docx</code></td>
          <td>Allowed file types</td>
        </tr>
      </tbody>
    </table>

    <!-- ═══════════════════════════════════════════════════════════════
         LIVE DEMO
    ═══════════════════════════════════════════════════════════════ -->

    <h2>Live Demo (Correct Structure)</h2>

    <div class="demo-section">

      <!-- THIS IS THE EXACT HTML YOU NEED IN WEBFLOW -->
      <div data-file-upload="wrapper"
           data-upload-endpoint="https://r2-upload-proxy.cloudflare-decorated911.workers.dev"
           data-max-size="5MB"
           data-accepted-types="application/pdf,.doc,.docx"
           class="input--container">

        <div class="input--header">
          <label class="input--label">CV</label>
        </div>

        <div class="input--file-upload">

          <!-- 1. FILE INPUT (hidden, but functional) -->
          <input type="file"
                 data-file-upload="input"
                 accept="application/pdf,.doc,.docx"
                 class="input is--upload">

          <!-- 2. IDLE VIEW (SIBLING of input) -->
          <div data-file-upload="content" class="upload--content">
            <div class="label--decorative">
              <div class="icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"/>
                  <path d="M14 2v4a2 2 0 0 0 2 2h4"/>
                  <path d="M12 12v6"/>
                  <path d="m15 15-3-3-3 3"/>
                </svg>
              </div>
            </div>
            <div class="sub-heading is--upload">
              Drag & drop your file or <a href="#" data-file-upload="browse" class="upload--browse">Browse</a>
            </div>
            <div data-file-upload="description" class="input--description">Max 5 MB: PDF, DOC, DOCX</div>
          </div>

          <!-- 3. UPLOAD VIEW (SIBLING of input) -->
          <div data-file-upload="loader" class="upload--loader">
            <div class="label--decorative">
              <div class="icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"/>
                  <path d="M14 2v4a2 2 0 0 0 2 2h4"/>
                  <path d="m9 15 2 2 4-4"/>
                </svg>
              </div>
            </div>
            <div data-file-upload="uploading" class="upload--filename">Uploading...</div>
            <div class="upload--progress-w">
              <div data-file-upload="progress-bar" class="upload--progress-bar" style="width: 40%;"></div>
            </div>
            <div class="upload--details">
              <div class="upload--details-left">
                <span data-file-upload="percentage" class="upload--percentage">40%</span>
                <span class="upload--divider">|</span>
                <span data-file-upload="size" class="upload--size">178MB of 445MB</span>
              </div>
              <span data-file-upload="notice" class="upload--notice">Click to undo</span>
            </div>
          </div>

        </div>

        <!-- 4. HIDDEN URL INPUT (for form submission) -->
        <input type="hidden" data-file-upload="url" name="cv_url">
      </div>

      <div style="margin-top: 1rem;">
        <button onclick="toggleState()" style="padding: 0.5rem 1rem; cursor: pointer;">Toggle State (Demo)</button>
        <span id="state-label" style="margin-left: 1rem; color: #666;">State: IDLE</span>
      </div>
    </div>

    <!-- ═══════════════════════════════════════════════════════════════
         KEY POINTS
    ═══════════════════════════════════════════════════════════════ -->

    <h2>Key Points</h2>

    <div class="info">
      <strong>1. SIBLINGS, NOT CHILDREN</strong><br>
      The <code>upload--content</code> and <code>upload--loader</code> must be siblings of the file input, not nested inside it.
    </div>

    <div class="info">
      <strong>2. USE INPUT, NOT FILE</strong><br>
      The file input must be <code>&lt;input type="file"&gt;</code>, not a custom <code>&lt;file&gt;</code> tag.
    </div>

    <div class="info">
      <strong>3. LOADER HIDDEN BY DEFAULT</strong><br>
      Set <code>upload--loader</code> to <code>display: none</code> in Webflow. The JS will show it when uploading.
    </div>

    <div class="info">
      <strong>4. ALL DATA ATTRIBUTES REQUIRED</strong><br>
      Every element in the table above needs its <code>data-file-upload</code> attribute for the JS to find it.
    </div>

  </div>

  <script>
    // Demo: Toggle between idle and uploading states
    let currentState = 'idle';
    function toggleState() {
      const wrapper = document.querySelector('[data-file-upload="wrapper"]');
      const fileUpload = wrapper.querySelector('.input--file-upload');
      const label = document.getElementById('state-label');

      if (currentState === 'idle') {
        fileUpload.classList.add('is--uploading');
        fileUpload.classList.remove('is--complete');
        label.textContent = 'State: UPLOADING';
        currentState = 'uploading';
      } else if (currentState === 'uploading') {
        fileUpload.classList.remove('is--uploading');
        fileUpload.classList.add('is--complete');
        wrapper.querySelector('[data-file-upload="uploading"]').textContent = 'document.pdf';
        wrapper.querySelector('[data-file-upload="percentage"]').textContent = '100%';
        wrapper.querySelector('[data-file-upload="size"]').textContent = '445MB';
        wrapper.querySelector('[data-file-upload="notice"]').textContent = 'Click to delete';
        wrapper.querySelector('[data-file-upload="progress-bar"]').style.width = '100%';
        label.textContent = 'State: COMPLETE';
        currentState = 'complete';
      } else {
        fileUpload.classList.remove('is--uploading', 'is--complete');
        wrapper.querySelector('[data-file-upload="uploading"]').textContent = 'Uploading...';
        wrapper.querySelector('[data-file-upload="percentage"]').textContent = '40%';
        wrapper.querySelector('[data-file-upload="size"]').textContent = '178MB of 445MB';
        wrapper.querySelector('[data-file-upload="notice"]').textContent = 'Click to undo';
        wrapper.querySelector('[data-file-upload="progress-bar"]').style.width = '40%';
        label.textContent = 'State: IDLE';
        currentState = 'idle';
      }
    }
  </script>
</body>
</html>
