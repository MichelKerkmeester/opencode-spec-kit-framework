{
  "_meta": {
    "version": "1.0.0",
    "created": "2026-02-27",
    "purpose": "Ground truth query set for Sprint 0 retrieval evaluation",
    "spec": "003-system-spec-kit/140-hybrid-rag-fusion-refinement",
    "total_queries": 20,
    "intent_type_counts": {
      "understand": 5,
      "find_decision": 5,
      "fix_bug": 4,
      "add_feature": 3,
      "find_spec": 3
    },
    "complexity_tier_counts": {
      "simple": 5,
      "moderate": 9,
      "complex": 6
    },
    "category_counts": {
      "factual": 4,
      "temporal": 3,
      "graph_relationship": 4,
      "cross_document": 4,
      "hard_negative": 5
    }
  },
  "queries": [
    {
      "id": 1,
      "query": "what does maxTriggersPerMemory control in the search pipeline",
      "intent_type": "understand",
      "complexity_tier": "simple",
      "category": "factual",
      "expected_result_description": "Memory or spec covering search-weights.json and the MAX_TRIGGERS_PER_MEMORY constant in vector-index-impl.ts. Should surface the T000c audit or related sprint-0 documentation.",
      "notes": "Direct factual lookup — tests whether a specific technical constant is retrievable by natural-language description of its purpose."
    },
    {
      "id": 2,
      "query": "why was SHA256 dedup introduced for memory indexing",
      "intent_type": "find_decision",
      "complexity_tier": "simple",
      "category": "graph_relationship",
      "expected_result_description": "Decision record or memory explaining T054 / T003 (content hash dedup) rationale. Should reference Wave 1 bug fixes and duplicate prevention.",
      "notes": "Tests causal-edge graph retrieval — the decision to add SHA256 should be linked to prior duplicates observed."
    },
    {
      "id": 3,
      "query": "how does intent classification affect search result ranking",
      "intent_type": "understand",
      "complexity_tier": "moderate",
      "category": "cross_document",
      "expected_result_description": "Should surface memories about adaptive-fusion.ts (7 intent profiles), intent-classifier.ts, and memory_context intent routing. Cross-document because the behavior spans multiple modules.",
      "notes": "Tests whether multi-hop conceptual retrieval works — the answer requires understanding intent-classifier + adaptive-fusion + memory-context handler together."
    },
    {
      "id": 4,
      "query": "what decisions led to using RRF instead of a weighted linear combination for search fusion",
      "intent_type": "find_decision",
      "complexity_tier": "complex",
      "category": "graph_relationship",
      "expected_result_description": "Decision records from hybrid-rag-fusion spec (spec 139) about fusion strategy selection. Should surface rationale for RRF over linear weighted sum.",
      "notes": "Graph-relationship query tracing decision lineage. Tests causal traversal in the decision graph."
    },
    {
      "id": 5,
      "query": "SPECKIT_ADAPTIVE_FUSION flag is not working when set to false",
      "intent_type": "fix_bug",
      "complexity_tier": "moderate",
      "category": "factual",
      "expected_result_description": "Should surface adaptive-fusion.ts (FEATURE_FLAG constant, isFeatureEnabled check), search-flags.ts, and rollout-policy.ts. Tests understanding the opt-out semantics.",
      "notes": "Bug-intent query matching a specific flag. Tests whether bug-intent scoring boosts recency and keyword channels appropriately."
    },
    {
      "id": 6,
      "query": "what was recently discussed about the graph channel hit rate being zero",
      "intent_type": "understand",
      "complexity_tier": "moderate",
      "category": "temporal",
      "expected_result_description": "Should surface sprint-0 baseline measurement (T000a) which records graphHitRate=0, and any related spec memories about graph channel initialization or telemetry gaps.",
      "notes": "Temporal query — 'recently discussed' should surface content from the last 7 days of memory creation. Tests recency boost in fix_bug / understand intent modes."
    },
    {
      "id": 7,
      "query": "how do I add a new feature flag to the SPECKIT system",
      "intent_type": "add_feature",
      "complexity_tier": "simple",
      "category": "factual",
      "expected_result_description": "Should surface the T000b feature flag governance document, rollout-policy.ts, and any SKILL.md sections about flag naming conventions.",
      "notes": "Add-feature intent for a procedural question. Tests whether governance documentation is surfaced for implementation guidance."
    },
    {
      "id": 8,
      "query": "what is the relationship between the working memory system and event decay",
      "intent_type": "understand",
      "complexity_tier": "moderate",
      "category": "cross_document",
      "expected_result_description": "Should surface memories about SPECKIT_WORKING_MEMORY, SPECKIT_EVENT_DECAY, working-memory.ts, and archival-manager.ts. The relationship is that event decay reduces attention scores over time.",
      "notes": "Cross-document query spanning multiple cognitive subsystems. Tests ability to retrieve conceptually related content without exact term matching."
    },
    {
      "id": 9,
      "query": "memory_context returns wrong results when token pressure is high",
      "intent_type": "fix_bug",
      "complexity_tier": "moderate",
      "category": "factual",
      "expected_result_description": "Should surface memory-context.ts SPECKIT_PRESSURE_POLICY handling, the getPressureLevel function, and any spec/memory about pressure policy design decisions.",
      "notes": "Bug-intent query with specific symptom. Tests whether bug-type queries get boosted keyword weighting for technical terms."
    },
    {
      "id": 10,
      "query": "what decisions shaped the architecture of the 7-layer MCP tool hierarchy",
      "intent_type": "find_decision",
      "complexity_tier": "complex",
      "category": "graph_relationship",
      "expected_result_description": "Should surface system-spec-kit spec documents and memories about the L1/L2/L3/L4/L5/L6/L7 layer design, token budgets per layer, and original design rationale.",
      "notes": "Graph-relationship query about architectural lineage. Tests find_decision intent routing with high graph weight (0.50 per adaptive-fusion profile)."
    },
    {
      "id": 11,
      "query": "how should I structure a new spec folder for a multi-phase feature",
      "intent_type": "add_feature",
      "complexity_tier": "moderate",
      "category": "cross_document",
      "expected_result_description": "Should surface system-spec-kit SKILL.md section on spec folder structure, phase system documentation (spec 138), and the create.sh --phase command details.",
      "notes": "Add-feature procedural query. Tests retrieval of how-to content for a workflow the user wants to follow."
    },
    {
      "id": 12,
      "query": "which spec documents were added during the hybrid RAG fusion sprint",
      "intent_type": "find_spec",
      "complexity_tier": "simple",
      "category": "temporal",
      "expected_result_description": "Should surface memories in spec folder 003-system-spec-kit/139-hybrid-rag-fusion (89 memories) and 140-hybrid-rag-fusion-refinement. Lists spec documents created in those sprints.",
      "notes": "Find-spec intent with temporal/scope framing. Tests specFolder-aware retrieval."
    },
    {
      "id": 13,
      "query": "what is the current test coverage gap for the eval logging system",
      "intent_type": "understand",
      "complexity_tier": "moderate",
      "category": "temporal",
      "expected_result_description": "Should surface T000a baseline (19 skipped tests, deferred DB fixture tests) and T005 eval-logger.ts module. May surface spec tasks.md identifying coverage gaps.",
      "notes": "Temporal query about current state. Tests whether the baseline measurement document surfaces for 'current state' queries."
    },
    {
      "id": 14,
      "query": "smartRanking config weights in search-weights.json are inconsistent with the code fallback values",
      "intent_type": "fix_bug",
      "complexity_tier": "complex",
      "category": "cross_document",
      "expected_result_description": "Should surface T000c audit document which explicitly documents the relevanceWeight 0.2 vs 0.5 discrepancy, plus vector-index-impl.ts lines 2802-2804.",
      "notes": "Bug-intent query for a specific discrepancy found during this audit. Tests whether newly created scratch documents are retrieved when they contain the answer."
    },
    {
      "id": 15,
      "query": "what spec folder documents are required for a level 2 spec",
      "intent_type": "find_spec",
      "complexity_tier": "simple",
      "category": "factual",
      "expected_result_description": "Should surface CLAUDE.md or system-spec-kit SKILL.md table showing Level 2 requires: spec.md, plan.md, tasks.md, implementation-summary.md, checklist.md.",
      "notes": "Find-spec direct factual lookup. Tests whether constitutional or critical-tier memories (CLAUDE.md rules) are prioritized in retrieval."
    },
    {
      "id": 16,
      "query": "what was decided about removing the cross-encoder configuration from search-weights.json",
      "intent_type": "find_decision",
      "complexity_tier": "complex",
      "category": "graph_relationship",
      "expected_result_description": "Should surface the T000c audit finding that the crossEncoder section is dead config per agent-14 audit on 2026-02-08. May also surface spec 139 decisions.",
      "notes": "Find-decision query about a specific configuration removal decision. Tests whether recent audit documents are correctly linked to their decision context."
    },
    {
      "id": 17,
      "query": "python unit tests for the billing module",
      "intent_type": "understand",
      "complexity_tier": "simple",
      "category": "hard_negative",
      "expected_result_description": "Should return NO relevant results. This codebase has no Python code, no billing module, and no pytest setup. A high-quality retrieval system returns empty or near-empty results.",
      "notes": "Hard negative — completely out-of-domain query. Tests the system's ability to not hallucinate false matches on irrelevant queries."
    },
    {
      "id": 18,
      "query": "React component library Storybook configuration",
      "intent_type": "find_spec",
      "complexity_tier": "simple",
      "category": "hard_negative",
      "expected_result_description": "Should return NO relevant results. No React, no Storybook, no frontend component system exists in this codebase.",
      "notes": "Hard negative — completely wrong domain (frontend UI). Tests false positive rate."
    },
    {
      "id": 19,
      "query": "Kubernetes deployment manifest for the MCP server",
      "intent_type": "find_spec",
      "complexity_tier": "moderate",
      "category": "hard_negative",
      "expected_result_description": "Should return NO relevant results. The MCP server is a Node.js local process; there is no Kubernetes or containerization setup.",
      "notes": "Hard negative — plausible-sounding query (it IS an MCP server!) but the deployment context does not exist. Tests whether surface-level term matches ('MCP server') cause false positives."
    },
    {
      "id": 20,
      "query": "OAuth 2.0 token refresh endpoint implementation",
      "intent_type": "add_feature",
      "complexity_tier": "moderate",
      "category": "hard_negative",
      "expected_result_description": "Should return NO relevant results. There is no OAuth, no HTTP server endpoints, no token auth in this system. API key validation is the only auth mechanism.",
      "notes": "Hard negative — auth-adjacent query that sounds plausible but targets a completely absent subsystem. Note: SPECKIT_SKIP_API_VALIDATION exists but is for internal testing bypass, not OAuth."
    },
    {
      "id": 21,
      "query": "GraphQL schema definition for the memory index API",
      "intent_type": "find_spec",
      "complexity_tier": "simple",
      "category": "hard_negative",
      "expected_result_description": "Should return NO relevant results. The API is MCP (Model Context Protocol) over JSON-RPC, not GraphQL. No schema definition language files exist.",
      "notes": "Hard negative — tests whether mentions of 'memory index' cause false matches when the query context (GraphQL) is entirely wrong."
    }
  ]
}
