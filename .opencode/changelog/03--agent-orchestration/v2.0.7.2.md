# v2.0.7.2

> Part of [OpenCode Dev Environment](https://github.com/MichelKerkmeester/opencode-spec-kit-framework)

---

## [**2.0.7.2**] - 2026-02-19

**Consolidated agent-orchestration update (ChatGPT + Copilot + Claude + core runtime model defaults)** -- Combines the single-hop delegation safety rollout, Claude parity sync, and core OpenCode model-unpin changes into one release note for `specs/004-agents/021-codex-orchestrate`.

> Spec folder: `specs/004-agents/021-codex-orchestrate/` (Level 3)
>
> Consolidates prior draft entries: `v2.0.7.0`, `v2.0.7.1`

---

## Highlights

### Category: Safety / Delegation

- **Single-hop delegation enforced across agent suites**: nested sub-agent dispatch is explicitly blocked for LEAF agents, with depth bounded to orchestrator -> leaf execution.
- **Context agents are direct-only**: retrieval stays memory-first and local, with no nested Task fan-out in Copilot/Claude context profiles.
- **Leaf guardrails standardized**: `debug`, `research`, `handover`, `review`, `speckit`, and `write` include hard-block illegal-nesting language.

### Category: Permissions / Runtime Model

- **Orchestrate read access enabled where needed**: orchestrators can load definitions/specs while still delegating implementation/exploration work.
- **Model pin removed (core OpenCode agents)**: deleted frontmatter `model` from `.opencode/agent/orchestrate.md`, `.opencode/agent/research.md`, and `.opencode/agent/debug.md` so runtime/default model selection is centrally controlled.

### Category: Cross-Suite Parity

- **ChatGPT + Copilot alignment captured**: policy and wording fixes synchronized without expanding Copilot context budgets.
- **Claude parity sync completed**: `.claude/agents/*` now mirrors Copilot safety behavior while preserving Claude frontmatter conventions (`tools`, `model`, `mcpServers`, `permissionMode`).
- **Runtime directory routing documented**: `AGENTS.md` now explicitly maps provider/runtime to canonical agent-definition roots (`.opencode/agent`, `.opencode/agent/chatgpt`, `.opencode/agent/claude`), with `.claude/agents` preserved as a compatibility alias.

### Category: Standards Verification

- **workflows-documentation validation passed**: `.opencode/agent/chatgpt/*.md` + `.opencode/agent/copilot/*.md` are `16/16 PASS`.
- **Claude suite validated correctly**: `.claude/agents/*.md` are `8/8 PASS` using explicit `--type agent`.
- **Model-unpin edits validated**: the three core OpenCode files pass `validate_document.py --type agent`.

### Category: Budget Posture

- **ChatGPT adaptive budgets retained**: Quick `~1.8K/55`, Standard `~3.5K/105`, Deep `~5.5K/165`.
- **Copilot remains conservative**: tighter-window defaults preserved.

## Files Changed

| File | Change |
|------|--------|
| `.opencode/agent/chatgpt/context.md` | Direct-only context retrieval, illegal-nesting protocol, verification alignment |
| `.opencode/agent/chatgpt/debug.md` | LEAF illegal-nesting hard-block + wording cleanup |
| `.opencode/agent/chatgpt/handover.md` | LEAF illegal-nesting hard-block + model/profile alignment |
| `.opencode/agent/chatgpt/orchestrate.md` | Single-hop NDP, depth/dispatch policy refinements, read-enabled orchestration behavior |
| `.opencode/agent/chatgpt/research.md` | LEAF hard-block + memory-save exception clarity |
| `.opencode/agent/chatgpt/review.md` | LEAF hard-block + `Read({ filePath })` terminology + P0 semantics |
| `.opencode/agent/chatgpt/speckit.md` | LEAF hard-block + Level/validation consistency updates |
| `.opencode/agent/chatgpt/write.md` | LEAF hard-block + template-first/DQI alignment |
| `.opencode/agent/copilot/context.md` | Direct-only retrieval (`task: deny`) + illegal-nesting protocol |
| `.opencode/agent/copilot/debug.md` | LEAF hard-block + fast-path wording cleanup |
| `.opencode/agent/copilot/handover.md` | LEAF hard-block + 5-section wording correction |
| `.opencode/agent/copilot/orchestrate.md` | Single-hop NDP + read-capable orchestrator policy |
| `.opencode/agent/copilot/research.md` | LEAF hard-block + trivial-research memory-save exception rules |
| `.opencode/agent/copilot/review.md` | LEAF hard-block + `filePath` + P0 semantics alignment |
| `.opencode/agent/copilot/speckit.md` | LEAF hard-block + Level 3/validation semantics alignment |
| `.opencode/agent/copilot/write.md` | LEAF hard-block + template-first fast path + mode-aware DQI rule |
| `.claude/agents/context.md` | Synced to direct-only retrieval body; removed `Task` from tools |
| `.claude/agents/debug.md` | Synced LEAF policy and debug workflow parity |
| `.claude/agents/handover.md` | Synced handover policy/body parity |
| `.claude/agents/orchestrate.md` | Synced single-hop orchestration body; includes `Read` + `Task` |
| `.claude/agents/research.md` | Synced research workflow and LEAF constraints |
| `.claude/agents/review.md` | Synced review rubric/policy body; Claude wording normalization |
| `.claude/agents/speckit.md` | Synced template/validation and LEAF policy body |
| `.claude/agents/write.md` | Synced documentation workflow and LEAF policy body |
| `.opencode/agent/orchestrate.md` | Removed frontmatter `model` (runtime default model selection) |
| `.opencode/agent/research.md` | Removed frontmatter `model` (runtime default model selection) |
| `.opencode/agent/debug.md` | Removed frontmatter `model` (runtime default model selection) |
| `AGENTS.md` | Added runtime/provider-specific agent directory resolution rules |

**Total: 28 files consolidated in this release note**

## Validation

- `python3 .opencode/skill/workflows-documentation/scripts/validate_document.py .opencode/agent/orchestrate.md --type agent` ✅
- `python3 .opencode/skill/workflows-documentation/scripts/validate_document.py .opencode/agent/research.md --type agent` ✅
- `python3 .opencode/skill/workflows-documentation/scripts/validate_document.py .opencode/agent/debug.md --type agent` ✅
- `python3 .opencode/skill/workflows-documentation/scripts/validate_document.py .opencode/agent/chatgpt/*.md --type agent` (16/16 across ChatGPT + Copilot) ✅
- `python3 .opencode/skill/workflows-documentation/scripts/validate_document.py .claude/agents/*.md --type agent` (8/8) ✅

## Upgrade

No migration required. Pull latest to apply consolidated orchestration safety changes, Claude parity sync, and runtime-model unpinning.
