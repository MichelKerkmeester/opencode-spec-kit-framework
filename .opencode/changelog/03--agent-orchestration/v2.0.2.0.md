# v2.0.2.0

> Part of [OpenCode Dev Environment](https://github.com/MichelKerkmeester/opencode-spec-kit-framework)

---

## [**2.0.2.0**] - 2026-02-14

**Command Agent Utilization Audit** — Enforced AGENTS.md routing rules across **33 command files** (create + spec_kit). Three violations fixed: spec folder creation now routes through @speckit, discovery through @context, quality scoring through @review. Spec_kit commands gained @debug, @research, and @handover routing. **204 verification checks passed**, plus **18/18 test suite** validation.

> Spec folder: `anobel.com/.opencode/specs/004-agents/014-command-agent-utilization/` (Level 3)

---

## Highlights

### Create Commands Agent Routing (18 files)

Three AGENTS.md violations fixed across all create command files:

- **@speckit routing (Rule 5)**: Spec folder creation in `create_skill` and `create_agent` now dispatches @speckit instead of inline Write calls. 4 YAML files updated
- **@context routing (Rule 4)**: Codebase discovery in `create_skill` and `create_agent` now dispatches @context instead of inline Glob/Grep. 4 YAML files updated
- **@review quality gate (Section 3)**: All 12 YAML files now include non-blocking @review step with 100-point rubric (Accuracy 40%, Completeness 35%, Consistency 25%, threshold 70)
- **Agent Routing sections**: All 6 MD reference files updated with step-agent-rule-purpose tables

### Spec Kit Commands Agent Routing (15 files)

Extended the same agent routing pattern to spec_kit commands:

- **@debug dispatch**: Added to `implement.md` and `complete.md` with failure threshold >= 3
- **@research trigger**: Added to `plan.md` on confidence < 60% or user request
- **@review dual-phase**: Pre-Commit code review (Mode 2, advisory) + Gate Validation checklist check (Mode 4, blocking) in `implement.md` and `complete.md`
- **@handover session-end**: Added to `plan.md`, `complete.md`, `implement.md`, `research.md`
- **Post-fix validation**: @review added to `debug.md` (advisory/non-blocking)

### Test Suite Validation (18 tests)

Sub-agent simulation test suite validating all 7 spec_kit command workflows:

- **18/18 tests passed**: 7 happy paths + 11 error/edge cases
- **Structural verification**: YAML workflow coherence, artifact generation, agent routing
- **Gate enforcement**: Quality gates, debug thresholds, stale session detection, attempt counters
- **Placeholder scan**: Zero `[PLACEHOLDER]`, `{{`, or `[NEEDS CLARIFICATION]` in happy-path outputs

## Files Changed

**Create commands (18 files):**
- 12 YAML: `create_{skill,agent,folder_readme,install_guide,skill_asset,skill_reference}_{auto,confirm}.yaml`
- 6 MD: `skill.md` · `agent.md` · `folder_readme.md` · `install_guide.md` · `skill_asset.md` · `skill_reference.md`

**Spec kit commands (15 files):**
- 10 YAML: `spec_kit_{plan,implement,complete,debug,research}_{auto,confirm}.yaml`
- 5 MD: `plan.md` · `implement.md` · `complete.md` · `debug.md` · `research.md`

**Test suite (90+ files):**
- `test-suite/orchestrator.md` · `test-suite/scripted-responses.yaml`
- 7 agent prompts in `test-suite/agents/`
- 18 workspace directories in `test-suite/workspaces/`
- `test-suite/results/test-report.md`

## Upgrade

No action required. Pull latest to get agent routing compliance. Create and spec_kit commands now dispatch @speckit, @context, @review, @debug, @research, and @handover at appropriate workflow steps.
