# v2.0.3.0

> Part of [OpenCode Dev Environment](https://github.com/MichelKerkmeester/opencode-spec-kit-framework)

---

## [**2.0.3.0**] - 2026-02-16

**Handover Haiku + Codex Agent Conversion** — Downgraded handover agent from Sonnet to Haiku across Copilot and Claude Code. Converted all **8 `.codex/agents/`** files from non-functional Claude Code YAML frontmatter to Codex-native profile-based format. Added **4 profiles** and **sub-agent dispatch MCP** to `.codex/config.toml`.

> Spec folder: `anobel.com/.opencode/specs/004-agents/016-handover-model-codex-compat/` (Level 3)

---

## Highlights

### Handover Model Downgrade (2 files)

Handover agent changed from Sonnet to Haiku across two platforms:

- **Copilot**: `github-copilot/claude-sonnet-4.5` -> `github-copilot/claude-haiku-4.5`
- **Claude Code**: `model: sonnet` -> `model: haiku`
- **Rationale**: Spec 012/013 validated Haiku adequacy for structured template-filling tasks

### Codex Agent Frontmatter Conversion (8 files)

All `.codex/agents/*.md` files converted from Claude Code format (non-functional) to Codex-native:

| Field | Before (Claude Code) | After (Codex) |
|-------|---------------------|---------------|
| Model selection | `model: sonnet` | `profile: balanced` |
| Tool access | `tools: [Read, Write, ...]` | Removed (session-level) |
| MCP servers | `mcpServers: [...]` | Removed (config-level) |
| Agent metadata | `name:`, `description:` | Removed (parsed from body) |
| Sandbox | Not supported | `sandbox_mode: workspace-write` |
| Approval | Not supported | `approval_policy: on-request` |

### Agent-to-Profile Mapping

| Agent | Profile | Sandbox |
|-------|---------|---------|
| context | `fast` | read-only |
| handover | `fast` | workspace-write |
| speckit | `balanced` | workspace-write |
| write | `balanced` | workspace-write |
| debug | `powerful` | workspace-write |
| research | `powerful` | workspace-write |
| review | `readonly` | read-only |
| orchestrate | `powerful` | workspace-write |

### Codex Profiles (config.toml)

All profiles use gpt-5.3 family. Differentiation via model variant and reasoning effort:

| Profile | Model | Reasoning Effort | Sandbox |
|---------|-------|-----------------|---------|
| `fast` | `gpt-5.3-codex-spark` | high | workspace-write |
| `balanced` | `gpt-5.3-codex` | high | workspace-write |
| `powerful` | `gpt-5.3-codex` | extra_high | workspace-write |
| `readonly` | `gpt-5.3-codex` | extra_high | read-only |

### Sub-Agent Dispatch MCP

Added `codex-specialized-subagents` MCP server to config.toml. Provides `delegate` tool that reads agent `.md` frontmatter and spawns `codex exec --profile <name> "<task>"`.

## Files Changed

| File | Action |
|------|--------|
| `.opencode/agent/handover.md` | Model field: sonnet -> haiku |
| `.claude/agents/handover.md` | Model field: sonnet -> haiku |
| `.codex/config.toml` | 4 profiles + sub-agents MCP added |
| `.codex/agents/context.md` | Frontmatter replaced |
| `.codex/agents/handover.md` | Frontmatter replaced |
| `.codex/agents/speckit.md` | Frontmatter replaced |
| `.codex/agents/write.md` | Frontmatter replaced |
| `.codex/agents/debug.md` | Frontmatter replaced |
| `.codex/agents/research.md` | Frontmatter replaced |
| `.codex/agents/review.md` | Frontmatter replaced |
| `.codex/agents/orchestrate.md` | Frontmatter replaced |

**Total: 11 files modified**

## Upgrade

No action required. Pull latest. Agent body content is unchanged — only frontmatter was modified. Codex sub-agent dispatch requires `codex-specialized-subagents` MCP (installed via npx on first use).
