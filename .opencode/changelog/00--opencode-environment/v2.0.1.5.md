# v2.0.1.5

> Part of [OpenCode Dev Environment](https://github.com/MichelKerkmeester/opencode-spec-kit-framework)

---

## [**2.0.1.5**] - 2026-02-14

**Create Commands YAML-First Architecture** — Refactored all **6 create commands** to the spec_kit YAML-first workflow pattern with dual execution modes (`:auto` / `:confirm`), proper EXECUTION PROTOCOL routing, and full architecture sections in all YAML files.

> Spec folder: `anobel.com/.opencode/specs/002-commands-and-skills/001-commands/009-create-yaml-architecture/` (Level 3)

---

## Highlights

### YAML-First Architecture Refactoring

The create commands used an inverted workflow model — the `.md` file ran the workflow inline and loaded YAML as a supplement. The spec_kit pattern is the opposite: `.md` is a router that loads YAML as the workflow engine. This release aligns all 6 create commands to the spec_kit pattern.

- **`.md` files refactored to routing documents**: EXECUTION PROTOCOL banner → Phase 0 (@write verification) → Unified Setup Phase → YAML loading → Reference context
- **Dual YAML modes**: Each command now has `_confirm.yaml` (interactive with checkpoints) and `_auto.yaml` (autonomous, no prompts)
- **`agent.md` fully rebuilt**: Was a 670-line inline workflow with an orphaned YAML file — now proper YAML-first architecture with both mode files built from scratch

### New Architecture Sections

All 12 YAML files now include sections matching the spec_kit standard:

- `workflow_enforcement` — strict sequential mode with phase gates
- `circuit_breaker` — 3-failure threshold with closed/open/half-open states
- `error_recovery` — handlers for template_not_found, validation_failure, file_write_failure, user_rejects_approach
- `quality_standards` — DQI minimum scores and validation pipeline
- `termination` — post-workflow next steps and conditions
- `rules` — 6 ALWAYS / 6 NEVER rules adapted per command

### Bug Fixes

- Step count metadata fixed in 3 YAMLs (`create_install_guide`, `create_skill_asset`, `create_skill_reference`): `sequential_5_step` → `sequential_6_step`

## Files Changed

**6 command `.md` files refactored:**
- `.opencode/command/create/skill.md` — golden reference (refactored first)
- `.opencode/command/create/folder_readme.md`
- `.opencode/command/create/install_guide.md`
- `.opencode/command/create/skill_asset.md`
- `.opencode/command/create/skill_reference.md`
- `.opencode/command/create/agent.md` — largest rewrite (670-line inline → YAML-first)

**6 YAML files renamed** (`_confirm` suffix added):
- `create_skill.yaml` → `create_skill_confirm.yaml`
- `create_folder_readme.yaml` → `create_folder_readme_confirm.yaml`
- `create_install_guide.yaml` → `create_install_guide_confirm.yaml`
- `create_skill_asset.yaml` → `create_skill_asset_confirm.yaml`
- `create_skill_reference.yaml` → `create_skill_reference_confirm.yaml`
- `create_agent.yaml` → removed (orphaned); `create_agent_confirm.yaml` built from scratch

**6 new auto YAML files created:**
- `create_skill_auto.yaml` · `create_folder_readme_auto.yaml` · `create_install_guide_auto.yaml` · `create_skill_asset_auto.yaml` · `create_skill_reference_auto.yaml` · `create_agent_auto.yaml`

## Upgrade

Drop-in replacement. Copy `.opencode/command/create/` to your project. Create commands now support `:auto` and `:confirm` mode suffixes — default is `:confirm` (interactive), so existing workflows are unaffected.
