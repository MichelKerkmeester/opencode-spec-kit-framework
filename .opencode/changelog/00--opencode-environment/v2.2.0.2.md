# v2.2.0.2

> Part of [OpenCode Dev Environment](https://github.com/MichelKerkmeester/opencode-spec-kit-framework)

---

## [**2.2.0.2**] - 2026-02-20

**MCP memory_stats enhancement, WAL contention fix, and documentation refresh** across **3 skills** with **3 new API response fields**, **1 concurrency fix**, and **2 FAQ sections** added.

---

## Highlights

### Category: Features

- **memory_stats() enriched**: Returns `tierBreakdown`, `databaseSizeBytes`, and `lastIndexedAt` — eliminates raw `sqlite3` CLI fallback for the `/memory:manage` stats dashboard.

### Category: Fixes

- **SQLite WAL contention resolved**: Added `busy_timeout = 10000` PRAGMA to database initialization, fixing intermittent "no such table: memory_index" errors under concurrent access.
- **Package version corrected**: `@spec-kit/mcp-server` version reverted from `1.7.3` to `1.7.2` to match actual release state.

### Category: Documentation

- **Shell safety warning**: Added zsh `!=` glob negation warning to MCP README diagnostic commands section.
- **FAQ sections added**: New FAQ sections in both System Spec Kit README and MCP Server README with common questions and answers.
- **README metrics refreshed**: ANCHOR count updated from ~473 to 533 across 78 skill READMEs.
- **Quick Start promoted**: MCP README restructured to surface Quick Start as section 2 (was section 7).

### Category: Architecture

- **Legacy node-index migration**: `mcp-code-mode` and `workflows-documentation` SKILL.md files were restructured to `index.md` + `nodes/` format with granular node entries.
- **New node entries**: `smart-routing.md`, `success-criteria.md`, `when-to-use.md` for workflows-documentation; `rules.md`, `when-to-use.md`, `success-criteria.md` for mcp-code-mode.

## Files Changed

- `mcp_server/handlers/memory-crud.ts` · `mcp_server/dist/handlers/memory-crud.js`
- `mcp_server/README.md` · `.opencode/skill/system-spec-kit/README.md`
- `mcp_server/package.json`
- `.opencode/skill/mcp-code-mode/{index.md,nodes/}` · `.opencode/skill/workflows-documentation/{index.md,nodes/}`
- `.opencode/changelog/01--system-spec-kit/v2.2.25.0.md` · `v2.2.26.0.md`
- `.opencode/changelog/00--opencode-environment/v2.2.0.2.md`
- `PUBLIC_RELEASE.md`

## Upgrade

No migration required. Pull latest and restart MCP server processes. The `memory_stats()` response now includes 3 additional fields (`tierBreakdown`, `databaseSizeBytes`, `lastIndexedAt`) that are additive and backward-compatible.
