# v2.0.4.0

> Part of [OpenCode Dev Environment](https://github.com/MichelKerkmeester/opencode-spec-kit-framework)

---

## [**2.0.4.0**] - 2026-02-16

**Codex Platform Integration** â€” Added Codex CLI profile system and sub-agent dispatch mechanism to `.codex/config.toml`. Four profiles (`fast`, `balanced`, `powerful`, `readonly`) using gpt-5.3 family with reasoning effort differentiation. Converted 8 `.codex/agents/` files to Codex-native frontmatter. Downgraded handover agent to Haiku across all platforms.

> Spec folder: `anobel.com/.opencode/specs/004-agents/016-handover-model-codex-compat/` (Level 3)

---

## Highlights

### Codex Profile System

Added 4 profiles to `.codex/config.toml` for model tier differentiation:

| Profile | Model | Reasoning Effort | Sandbox |
|---------|-------|-----------------|---------|
| `fast` | `gpt-5.3-codex-spark` | high | workspace-write |
| `balanced` | `gpt-5.3-codex` | high | workspace-write |
| `powerful` | `gpt-5.3-codex` | extra_high | workspace-write |
| `readonly` | `gpt-5.3-codex` | extra_high | read-only |

### Sub-Agent Dispatch MCP

Added `codex-specialized-subagents` MCP server enabling the `delegate` tool. Reads `.codex/agents/*.md` frontmatter and spawns `codex exec --profile <name> "<task>"`.

### Cross-Platform Agent Model Alignment

| Profile | Codex | Claude Code | Copilot |
|---------|-------|-------------|---------|
| `fast` | gpt-5.3-codex-spark | haiku | claude-haiku-4.5 |
| `balanced` | gpt-5.3-codex | sonnet | claude-sonnet-4.5 |
| `powerful` | gpt-5.3-codex | opus | claude-opus-4.6 |
| `readonly` | gpt-5.3-codex | opus | claude-opus-4.6 |

### Handover Agent Downgrade

Handover agent changed from Sonnet to Haiku (Copilot + Claude Code) and `fast` profile (Codex). Validated by spec 012/013 for structured template-filling tasks.

## Files Changed

| File | Action |
|------|--------|
| `.codex/config.toml` | 4 profiles + sub-agents MCP |
| `.codex/agents/*.md` (8 files) | Codex-native frontmatter |
| `.opencode/agent/handover.md` | Model: haiku |
| `.claude/agents/handover.md` | Model: haiku |

**Total: 11 files modified**

## Upgrade

No action required. Pull latest. Codex sub-agent dispatch requires the `codex-specialized-subagents` MCP package (auto-installed via npx on first use).
