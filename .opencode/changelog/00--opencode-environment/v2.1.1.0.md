# v2.1.1.0

> Part of [OpenCode Dev Environment](https://github.com/MichelKerkmeester/opencode-spec-kit-framework)

---

## [**2.1.1.0**] - 2026-02-17

**Consolidated framework release after `v2.0.2.3`** -- Restyled to match recent changelog format and expanded with the requested streams: **agent-orchestration (2 versions)**, **commands (2 versions)**, **workflows-documentation (v1.0.7.0 + v1.0.8.0)**, and **system-spec-kit (v2.2.9.0 through v2.2.20.0)**, plus Smart Router V2 rollout/refinement updates.

> Source comparison: latest public release note `v2.0.2.3`
>
> Included analysis set: last 15 active specs and last 30 active changelogs, with explicit inclusion of requested changelog files

---

## Highlights

### Agent Orchestration (`03--agent-orchestration/v2.0.4.0` + `v2.0.5.0`)

- **Documentation alignment pass** -- Memory/spec_kit command docs and cross-platform agent docs were normalized to current orchestration behavior.
- **Orchestrate restructure (27 -> 10 sections)** -- Decision-loop-based layout, Nesting Depth Protocol prominence, budget consolidation, and anti-pattern reduction.
- **Cross-variant parity and sync** -- Base/chatgpt parity maintained, copilot aligned, and `.claude/agents/` synced for all core agent profiles.

### Commands (`04--commands/v2.0.2.0` + `v2.0.3.0`)

- **Agent routing compliance baseline** -- 33 command files aligned to AGENTS.md routing model across create/spec_kit command stacks.
- **Codex compatibility hardening** -- Three-part fix shipped for `spec_kit`: strip trigger-prone markdown routing blocks, add explicit CONSTRAINTS guards, and convert YAML routing semantics to conditional availability.
- **Dispatch timing protection** -- Reduced false early dispatch for `@review`, `@handover`, and `@debug` by moving dispatch intent into safer YAML semantics.

### Documentation Workflow (`06--workflows-documentation/v1.0.7.0` + `v1.0.8.0`)

- **Emoji enforcement removed** -- H2/TOC emoji requirements dropped from templates, validators, references, and test fixtures.
- **Routing template modernization** -- Smart Routing docs updated to detection-first flow with merged resource domains and a single authoritative pseudocode section.

### System Spec Kit Series (`01--system-spec-kit/v2.2.9.0` -> `v2.2.20.0`)

- **v2.2.9.0** -- Agent routing doc update in SKILL/README, including dispatch table and mode suffix guidance.
- **v2.2.10.0** -- Node modules relocation to `mcp_server/node_modules/` with install/runtime path updates.
- **v2.2.11.0** -- README anchor coverage and HVR compliance uplift.
- **v2.2.12.0** -- Comprehensive script audit and blocker surfacing.
- **v2.2.13.0** -- System-wide documentation quality tightening.
- **v2.2.14.0** -- `generate-context.js` relative subfolder path resolution fix.
- **v2.2.15.0** -- Spec level upgrade automation script introduced.
- **v2.2.16.0** -- Upgrade script hardening with fail-fast, rollback, and regression tests.
- **v2.2.17.0** -- Full spec document indexing expansion and alignment pass.
- **v2.2.18.0** -- Mandatory AI auto-populate workflow for post-upgrade placeholders.
- **v2.2.19.0** -- Documentation aligned to post-spec-126 hardening state.
- **v2.2.20.0** -- Canonical runtime DB path (`mcp_server/dist/database/context-index.sqlite`) and split-path compatibility documentation.

### Smart Router and Skill Alignment

- **V2 rollout and refinement included** -- Weighted routing, adaptive top-N ambiguity handling, synonym expansion, UNKNOWN fallback guidance, and benchmark-backed validation coverage.
- **Skill/changelog consistency updates** -- Version normalization and changelog additions for `workflows-code--opencode`, `workflows-code--web-dev`, `workflows-code--full-stack`, and `workflows-git`.

## Files Changed

| Scope | Representative Files |
|------|--------|
| Agent orchestration | `.opencode/agent/orchestrate.md` · `.opencode/agent/chatgpt/orchestrate.md` · `.opencode/agent/copilot/orchestrate.md` · `.claude/agents/*.md` |
| Commands | `.opencode/command/spec_kit/*.md` · `.opencode/command/spec_kit/assets/*.yaml` · `.opencode/command/create/*.md` · `.opencode/command/create/assets/*.yaml` |
| System Spec Kit | `.opencode/skill/system-spec-kit/**` (scripts, docs, server/runtime references) |
| Workflow skills | `.opencode/skill/workflows-documentation/**` · `.opencode/skill/workflows-code--full-stack/SKILL.md` · `.opencode/skill/workflows-code--web-dev/SKILL.md` · `.opencode/skill/workflows-code--opencode/SKILL.md` · `.opencode/skill/workflows-git/SKILL.md` |
| Environment/config | `opencode.json` · `.claude/mcp.json` · `.vscode/mcp.json` · `.codex/config.toml` |
| Release/changelog lineage | `.opencode/changelog/00--opencode-environment/v2.0.3.0.md` · `.opencode/changelog/00--opencode-environment/v2.0.4.0.md` · `.opencode/changelog/00--opencode-environment/v2.0.5.0.md` · `.opencode/changelog/00--opencode-environment/v2.1.0.0.md` · `.opencode/changelog/00--opencode-environment/v2.1.1.0.md` |

## Upgrade

1. Pull latest from `main`.
2. Restart active OpenCode/Claude/VSCode/Codex sessions so canonical `MEMORY_DB_PATH` and updated agent/command docs are active.
3. If your local MCP runtime predates node-modules relocation and DB path standardization, rerun install verification from `.opencode/install_guides/`.
