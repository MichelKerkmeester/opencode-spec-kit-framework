# v2.1.3.1

> Part of [OpenCode Dev Environment](https://github.com/MichelKerkmeester/opencode-spec-kit-framework)

---

## [**2.1.3.1**] - 2026-02-18

**MCP post-update recovery hardening** -- Hardened Spec Kit Memory installation and recovery workflows with a full guide rewrite, installer-script alignment, and validated end-to-end recovery checks for update-related failures.

---

## Highlights

### Category: Fixes

- **Installer hardening**: `.opencode/install_guides/install_scripts/install-spec-kit-memory.sh` now runs workspace-root install/build, supports automatic build fallback, performs native module health checks, and runs startup smoke testing.
- **Native recovery path**: Automatic fallback path now guides users through native module rebuild and re-verification when health checks report failures.
- **Runtime path verification**: Installer verification now checks canonical DB path and reports compatibility symlink status.

### Category: Documentation

- **Install guide rewrite**: `.opencode/install_guides/MCP - Spec Kit Memory.md` (backed by `mcp_server/INSTALL_GUIDE.md`) was rewritten to workflows-documentation standards.
- **Root-cause guidance**: The guide now documents relocation as one contributing factor alongside workspace mismatch, native ABI mismatch, and DB-path confusion.
- **Operational recovery guidance**: Added clear post-update recovery and verification commands for OpenCode/Claude users.

### Category: Process

- **Spec finalization**: Completed Level 2 documentation in `.opencode/specs/003-system-spec-kit/135-mcp-issues-after-update/` with fully populated tasks/checklist/implementation summary and validator pass.

## Files Changed

- `.opencode/install_guides/install_scripts/install-spec-kit-memory.sh`
- `.opencode/skill/system-spec-kit/mcp_server/INSTALL_GUIDE.md`
- `.opencode/specs/003-system-spec-kit/135-mcp-issues-after-update/spec.md` 路 `.opencode/specs/003-system-spec-kit/135-mcp-issues-after-update/plan.md` 路 `.opencode/specs/003-system-spec-kit/135-mcp-issues-after-update/tasks.md` 路 `.opencode/specs/003-system-spec-kit/135-mcp-issues-after-update/checklist.md` 路 `.opencode/specs/003-system-spec-kit/135-mcp-issues-after-update/implementation-summary.md`
- `.opencode/changelog/01--system-spec-kit/v2.2.21.0.md`

## Upgrade

1. Pull latest from `main`.
2. Re-run `.opencode/install_guides/install_scripts/install-spec-kit-memory.sh` if your MCP runtime was impacted by a recent update.
3. Restart your MCP client (OpenCode/Claude Code) after installer completion.
