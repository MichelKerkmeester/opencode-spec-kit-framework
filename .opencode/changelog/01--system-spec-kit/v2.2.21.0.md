# v2.2.21.0

> Part of [OpenCode Dev Environment](https://github.com/MichelKerkmeester/opencode-spec-kit-framework)

---

## [**2.2.21.0**] - 2026-02-18

**Post-update MCP recovery guide hardening** -- Rewrote the Spec Kit Memory install guide to workflows-documentation standards and added operator-ready recovery and verification guidance for update-related MCP failures.

> Spec folder: `.opencode/specs/003-system-spec-kit/135-mcp-issues-after-update/` (Level 2)

---

## Highlights

### Installation Guide Rewrite

- **Template-aligned install guide** -- Updated `mcp_server/INSTALL_GUIDE.md` to a structured install-guide format with AI-first flow, phased validation checkpoints, and improved scannability.
- **Root-cause clarity** -- Documented that node_modules relocation is a contributor, not the sole root cause; added coverage for workspace install/build mismatch and native ABI mismatch.
- **Path correctness** -- Standardized documentation on canonical runtime DB path `mcp_server/dist/database/context-index.sqlite` and compatibility symlink behavior.

### Recovery and Verification

- **Recovery-first workflow** -- Added a fast recovery sequence for post-update failures using install/build/native checks.
- **Error-signature troubleshooting** -- Added targeted procedures for `@spec-kit/shared` module resolution failures, `ERR_DLOPEN_FAILED`/`NODE_MODULE_VERSION`, and `sqlite-vec` degradation mode.
- **Operational health checks** -- Added concrete verification commands and expected outcomes for post-recovery validation.

## Files Changed

| File | Action |
|------|--------|
| `.opencode/skill/system-spec-kit/mcp_server/INSTALL_GUIDE.md` | Modified |

**Total: 1 file modified**

## Upgrade

No migration required. Pull latest and follow the recovery flow in `mcp_server/INSTALL_GUIDE.md` if you encounter post-update MCP startup issues.
