# v2.2.10.0

> Part of [OpenCode Dev Environment](https://github.com/MichelKerkmeester/opencode-spec-kit-framework)

---

## [**2.2.10.0**] - 2026-02-15

**Node Modules Relocation** — Moved dependencies from workspace root (`system-spec-kit/node_modules/`) into `mcp_server/node_modules/` using npm `install-strategy=nested`. Updated **12+ files** across install guides, shell scripts, and source code (spec 120).

> Spec folder: `.opencode/specs/003-system-spec-kit/120-node-modules-relocation/`

---

## Highlights

### Infrastructure

- **.npmrc**: New file with `install-strategy=nested` — npm installs deps per-workspace instead of hoisting to root
- **Root package.json**: Removed redundant `better-sqlite3` from root dependencies
- **mcp_server/package.json**: Added `sqlite-vec-darwin-arm64` as optionalDependency for nested install compatibility
- **Symlink**: `lib/cache/cognitive` -> `../cognitive` fixes TypeScript build paths

### Documentation

- **INSTALL_GUIDE.md**: All `system-spec-kit/node_modules/` references corrected to `mcp_server/node_modules/`
- **install-spec-kit-memory.sh**: Install, rebuild, and verify commands now target `mcp_server/`
- **check-native-modules.sh**: better-sqlite3 probe path updated
- **rebuild-native-modules.sh**: Rebuild location updated to `mcp_server/`

### Source Code

- **folder-detector.ts**: better-sqlite3 require path updated to `mcp_server/node_modules/`
- **test-folder-detector-functional.js**: Test paths updated to match

## Files Changed

- `.opencode/skill/system-spec-kit/.npmrc` · `package.json` · `package-lock.json`
- `mcp_server/package.json` · `mcp_server/INSTALL_GUIDE.md` · `mcp_server/lib/cache/cognitive` (symlink)
- `scripts/spec-folder/folder-detector.ts` · `scripts/tests/test-folder-detector-functional.js`
- `scripts/setup/check-native-modules.sh` · `scripts/setup/rebuild-native-modules.sh`

## Upgrade

No action required. Pull latest. If running a linked project, restart the MCP server to pick up the new dependency paths.
