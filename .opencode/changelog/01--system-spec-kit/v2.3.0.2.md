# v2.3.0.2

> Part of [OpenCode Dev Environment](https://github.com/MichelKerkmeester/opencode-spec-kit-framework)

---

## [**2.3.0.2**] - 2026-02-22

**Hybrid RAG Fusion Workstream A delivered as the Unified Context Engine baseline** - The memory MCP search pipeline now runs tri-channel retrieval (vector, FTS5/BM25, graph), adaptive fusion, evidence-gap detection, and diversity reranking with explicit regression coverage.

> Spec folder: `.opencode/specs/003-system-spec-kit/139-hybrid-rag-fusion/002-hybrid-rag-fusion/` (Level 3+)

---

## Highlights

### Category: Features

- **Pipeline wiring completed**: `hybrid-search.ts` now enables graph retrieval by default, applies intent-aware adaptive fusion, and runs co-activation plus MMR in the main flow.
- **Evidence-gap signaling added**: `memory-search.ts` now surfaces explicit low-confidence warnings using TRM scoring from `evidence-gap-detector.ts`.
- **Deep-mode query expansion added**: `query-expander.ts` provides deterministic synonym variants for multi-query retrieval in deep mode.
- **Foundation modules created for Phase 4**: `pagerank.ts` and `structure-aware-chunker.ts` were implemented and tested, but are still intentionally not wired into ingest.

### Category: Testing

- **New module suites passed**: MMR, TRM evidence-gap, query expansion, pagerank, and structure-aware chunking test suites all passed.
- **Pipeline and handler regressions passed**: wiring changes in `hybrid-search.ts` and `memory-search.ts` were validated, including opt-out behavior and integration pipeline checks.
- **Global stability maintained**: latest verification in spec evidence reports `4,546 passed`, `19 skipped`, `0 failed`.

### Category: Documentation

- **Consolidation completed**: this folder was synchronized as the canonical active RAG track, with supplemental command-alignment and non-skill-graph consolidation notes indexed.

## Files Changed

| File | Change |
|------|--------|
| `.opencode/skill/system-spec-kit/mcp_server/lib/search/mmr-reranker.ts` | New MMR reranker module |
| `.opencode/skill/system-spec-kit/mcp_server/lib/search/evidence-gap-detector.ts` | New TRM evidence-gap detector |
| `.opencode/skill/system-spec-kit/mcp_server/lib/search/query-expander.ts` | New deterministic query expansion module |
| `.opencode/skill/system-spec-kit/mcp_server/lib/manage/pagerank.ts` | New PageRank authority module (not yet wired) |
| `.opencode/skill/system-spec-kit/scripts/lib/structure-aware-chunker.ts` | New structure-aware chunker (not yet wired) |
| `.opencode/skill/system-spec-kit/mcp_server/lib/search/hybrid-search.ts` | Graph/adaptive-fusion/co-activation/MMR wiring |
| `.opencode/skill/system-spec-kit/mcp_server/handlers/memory-search.ts` | Evidence-gap warnings, deep query expansion, rerank default |
| `.opencode/skill/system-spec-kit/mcp_server/tests/integration-138-pipeline.vitest.ts` | New integration coverage for production adapters |

## Upgrade

No schema migration is required (v15 SQLite unchanged) and no new runtime dependencies were introduced for the shipped path. Restart the MCP runtime to pick up new pipeline behavior. Note that PageRank ingest wiring, structure-aware ingest chunking, and empirical 120ms latency profiling remain deferred follow-up items.
