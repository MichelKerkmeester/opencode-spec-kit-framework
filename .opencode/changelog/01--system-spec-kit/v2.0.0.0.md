# v2.0.0.0

> Part of [OpenCode Dev Environment](https://github.com/MichelKerkmeester/opencode-spec-kit-framework)

---

## [**2.0.0.0**] - 2026-02-07

**JavaScript to TypeScript migration** (Spec 092) converting the full codebase across `shared/`, `mcp_server/`, and `scripts/` to TypeScript. Compiled CommonJS output preserves backward compatibility.

---

## Highlights

### Changed

#### Migration Summary

| Phase | Scope | Files |
|-------|-------|-------|
| Phase 0 | TypeScript standards + infrastructure | 5 |
| Phase 1 | `shared/` workspace — types, embeddings, utilities | ~15 |
| Phase 2 | `mcp_server/core/` — config, database, state management | ~8 |
| Phase 3 | `mcp_server/lib/` — search, scoring, cognitive, session | ~25 |
| Phase 4 | `mcp_server/handlers/` — MCP tool handlers | ~12 |
| Phase 5 | `mcp_server/` root — context-server entry point | ~5 |
| Phase 6 | `scripts/` workspace — memory, spec, template scripts | ~15 |
| Phase 7 | Test files — all 59 test files converted | ~59 |
| Phase 8 | Documentation — code examples, file references | ~16 |

#### Architecture Decisions

- **D1** — CommonJS output format (not ESM) for Node.js compatibility
- **D2** — Strict mode enabled (`strict: true` in tsconfig)
- **D3** — Project references for multi-workspace builds
- **D4** — Incremental compilation for fast rebuilds
- **D5** — Type declarations generated for cross-workspace imports
- **D6** — Source maps enabled for debugging
- **D7** — Path aliases matching existing require patterns
- **D8** — Test files co-located with source (converted in Phase 7)

#### Infrastructure

- **tsconfig.json** — Workspace-level configurations with project references
- **Build pipeline** — TypeScript compilation integrated into existing workflow

#### Source Files

- **All .js → .ts** — Full codebase conversion across all workspaces
- **Path references** — Updated throughout for TypeScript module resolution
- **Standards** — TypeScript coding standards established
- **Code examples** — Updated in documentation to reflect TypeScript syntax
- **File paths** — All documentation references updated from `.js` to `.ts`

### New

- **`shared/types.ts`** — Central type definitions for cross-workspace interfaces
- **`sqlite-vec.d.ts`** — Type declarations for SQLite vector extension
- **TypeScript standards** — In `workflows-code--opencode` skill
- **`tsconfig.json` files** — For each workspace with project references
- **Backward-compatible CommonJS exports** — Compiled `.js` output identical in behavior
- **All runtime file paths and configurations** — Unchanged
- **`opencode.json` startup commands** — Unchanged (`node context-server.js`)
- **Security patterns** — Maintained (path validation, input sanitization)
- **All 59 test files** — Pass after conversion

## Source

- Decision Record: `specs/003-memory-and-spec-kit/092-javascript-to-typescript/decision-record.md`
- Spec Folder: `specs/003-memory-and-spec-kit/092-javascript-to-typescript/`
