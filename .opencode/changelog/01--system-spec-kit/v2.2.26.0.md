# v2.2.26.0

> Part of [OpenCode Dev Environment](https://github.com/MichelKerkmeester/opencode-spec-kit-framework)

---

## [**2.2.26.0**] - 2026-02-20

**Enhance `memory_stats()` with 3 new response fields** eliminating the need for raw `sqlite3` CLI queries in the `/memory:manage` stats dashboard.

---

## Highlights

### Category: Features

- **Tier breakdown**: `memory_stats()` now returns `tierBreakdown` with per-tier memory counts (e.g., `{ "constitutional": 5, "working": 12, "normal": 89 }`), removing the need for `SELECT importance_tier, COUNT(*) ... GROUP BY` via shell.
- **Database size**: `memory_stats()` now returns `databaseSizeBytes` via `fs.statSync()` on the SQLite file, so callers no longer need `ls -la` or `wc -c` to report DB size.
- **Last indexed timestamp**: `memory_stats()` now returns `lastIndexedAt` with `MAX(updated_at)` from `memory_index`, replacing the raw `sqlite3 ... "SELECT MAX(updated_at)"` fallback.

### Category: Documentation

- **Shell safety note**: Added zsh warning to MCP README diagnostic commands section advising `<>` over `!=` to avoid glob negation errors.

## Files Changed

| File | Change |
|------|--------|
| `mcp_server/handlers/memory-crud.ts` | Added `fs` import, tier breakdown query, last-indexed query, DB size via `statSync`, expanded response |
| `mcp_server/dist/handlers/memory-crud.js` | Same changes applied to compiled JS output |
| `mcp_server/README.md` | Shell safety blockquote before diagnostic commands |

## Upgrade

No migration required. Restart any running MCP server processes to pick up the new `memory_stats()` fields. The 3 new fields (`tierBreakdown`, `databaseSizeBytes`, `lastIndexedAt`) are additive and backward-compatible.
