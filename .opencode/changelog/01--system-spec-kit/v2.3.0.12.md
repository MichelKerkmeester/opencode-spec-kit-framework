# v2.3.0.12

> Part of [OpenCode Dev Environment](https://github.com/MichelKerkmeester/opencode-spec-kit-framework)

---

## [**2.3.0.12**] - 2026-02-26

**Fix dual importance_tier fields in memory export** - Memory files were generated with two conflicting importance tier fields: a hardcoded `importance_tier: "normal"` (snake_case) and a dynamically resolved `importanceTier: "critical"` (camelCase). The stale default was read first by frontmatter parsers, causing incorrect tier classification.

---

## Highlights

### Category: Bug Fix

- **Root cause**: Template `context_template.md` had a hardcoded `importance_tier: "normal"` alongside a placeholder `importanceTier: "{{IMPORTANCE_TIER}}"`. After rendering, both fields persisted with different values.
- **Template fix**: Replaced both fields with a single `importance_tier: "{{IMPORTANCE_TIER}}"` that receives the dynamically detected value during rendering.
- **Interface cleanup**: Removed `importanceTierAlias` from `ManagedFrontmatter` interface and its serialization path in `serializeFrontmatter()`.
- **Backward compatibility**: Added `resolveImportanceTierValue()` helper in `buildManagedFrontmatter()` to handle existing memory files with legacy dual fields — prefers the non-"normal" value when both are present.

### Category: Verification

- **All 10 frontmatter backfill tests pass** (T-FMB-001 through T-FMB-010).
- **TypeScript build clean** with zero errors.

## Files Changed

| File | Change |
|------|--------|
| `.opencode/skill/system-spec-kit/templates/context_template.md` | Replaced dual importance tier fields with single `{{IMPORTANCE_TIER}}` placeholder |
| `.opencode/skill/system-spec-kit/scripts/lib/frontmatter-migration.ts` | Removed `importanceTierAlias` from interface, fixed `frontmatterForContextTemplate()`, removed alias serialization, added `resolveImportanceTierValue()` for backward compat |

## Upgrade

No schema migration required. Existing memory files with dual importance tier fields will be resolved correctly on next frontmatter backfill run — the non-"normal" value is preferred when both fields are present.
