# v2.1.0.0

> Part of [OpenCode Dev Environment](https://github.com/MichelKerkmeester/opencode-spec-kit-framework)

---

## [**2.1.0.0**] - 2026-02-23

**Refactor /memory:learn from generic learning capture to constitutional memory manager** -- Complete rewrite of the learn command to focus exclusively on creating and managing constitutional memories (always-surface, highest-tier rules). Drops the previous 5-type learning classifier and spec folder destination workflow in favor of a streamlined constitutional file creation pipeline.

> Spec folder: `.opencode/specs/003-system-spec-kit/139-hybrid-rag-fusion/009-constitutional-learn-refactor/` (spec documentation status: `In Progress` as of 2026-02-24)

---

## Highlights

### Category: Breaking Change

- **`/memory:learn` completely rewritten**: No longer captures generic "learnings" (pattern, mistake, insight, optimization, constraint). Now exclusively manages constitutional memories stored in `.opencode/skill/system-spec-kit/constitutional/`.
- **Removed subcommands**: `correct`, `undo`, `history` are no longer available.
- **New subcommands**: `list`, `edit`, `remove`, `budget` for managing constitutional memories.

### Category: New Functionality

- **Guided constitutional memory creation**: Interactive workflow that structures rules with proper YAML frontmatter (`importanceTier: constitutional`), trigger phrases, and ANCHOR format.
- **Token budget awareness**: Checks the ~2000 token budget before creating new memories, warns when budget is exceeded.
- **`/memory:learn list`**: Shows all constitutional memories with trigger phrases and token budget usage.
- **`/memory:learn budget`**: Displays detailed token budget breakdown per file.
- **`/memory:learn edit <file>`**: Edit existing constitutional memories with re-indexing.
- **`/memory:learn remove <file>`**: Remove constitutional memories with confirmation prompt.

### Category: Cross-Reference Updates

- **`README.txt`**: Updated command description, subcommand table, and usage examples.
- **`CLAUDE.md`**: Quick Reference table updated ("Learn from mistakes" replaced with "Constitutional memory" workflow).
- **`system-spec-kit/README.md`**: Updated `/memory:learn` description.
- **`manage.md`**: Updated related commands reference.
- **Gemini TOML**: Updated `.gemini/commands/memory/learn.toml` description.

---

## Files Changed

| File | Action | Lines |
|------|--------|-------|
| `.opencode/command/memory/learn.md` | Rewritten | 620 -> 280 |
| `.opencode/command/memory/README.txt` | Edited | ~15 lines |
| `.opencode/command/memory/manage.md` | Edited | 1 line |
| `.gemini/commands/memory/learn.toml` | Edited | 1 line |
| `CLAUDE.md` | Edited | 1 line |
| `.opencode/skill/system-spec-kit/README.md` | Edited | 1 line |

---

## Migration Notes

- **No code changes**: The constitutional tier system (`importance-tiers.ts`, `tier-classifier.ts`, `memory_save`) is unchanged.
- **Existing constitutional files** (e.g., `gate-enforcement.md`) are unaffected.
- **Old learnings**: Previously saved "learnings" remain in their spec folder `memory/` directories. They are not migrated or deleted.
- **Codex symlink**: `.codex/prompts/memory-learn.md` already points to the source file and requires no update.

## Documentation Status Note

- The command-side rewrite release remains documented here, while the linked source spec folder currently reports `Status: In Progress` and does not yet contain `implementation-summary.md`.
