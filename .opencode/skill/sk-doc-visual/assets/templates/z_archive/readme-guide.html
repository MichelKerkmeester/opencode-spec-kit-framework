<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="color-scheme" content="light dark">
  <title>SpecKit | OpenCode Technical Ledger</title>\n  <link rel="stylesheet" href="../variables/fluid-typography.css">
  <link rel="stylesheet" href="../variables/colors.css">
  <link rel="stylesheet" href="../variables/typography.css">
  <link rel="stylesheet" href="../variables/layout.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;600&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://code.iconify.design/iconify-icon/1.0.7/iconify-icon.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
  <script>mermaid.initialize({ startOnLoad: true, theme: 'dark' });</script>
  <style>
    html {
      font-size: calc(var(--font-size-4) * 1rem);
      scroll-behavior: smooth;
      background-color: var(--bg);
      color: var(--text);
    }

    @media screen and (max-width: 5120px) { html { font-size: calc(var(--base-3) * 1rem + var(--coefficient-3) * 1vw); } }
    @media screen and (max-width: 1920px) { html { font-size: calc(var(--base-2) * 1rem + var(--coefficient-2) * 1vw); } }
    @media screen and (max-width: 1440px) { html { font-size: calc(var(--base-1) * 1rem + var(--coefficient-1) * 1vw); } }
    @media screen and (max-width: 991px) { html { font-size: calc(var(--base-0) * 1rem + var(--coefficient-0) * 1vw); } }

    body {
      font-family: var(--font-sans);
      line-height: var(--lh-base);
      font-weight: var(--weight-medium);
      -webkit-font-smoothing: antialiased;
    }

    .mono {
      font-family: var(--font-mono);
    }

    ::-webkit-scrollbar {
      width: 4px;
      height: 4px;
    }

    ::-webkit-scrollbar-track {
      background: var(--bg);
    }

    ::-webkit-scrollbar-thumb {
      background: var(--border);
      border-radius: 10px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: var(--accent);
    }

    .page-container {
      width: 100%;
      max-width: var(--container-max);
      margin: 0 auto;
    }

    .main-grid {
      display: grid;
      grid-template-columns: var(--sidebar-w) minmax(0, 1fr) var(--right-sidebar-w);
      gap: var(--gap-xl);
    }

    .sidebar {
      border-right: 1px solid var(--border);
      padding-right: 2rem;
      height: 100%;
    }

    .right-sidebar {
      border-left: 1px solid var(--border);
      padding-left: 2rem;
      height: 100%;
    }

    @media (max-width: 1280px) {
      .main-grid {
        grid-template-columns: var(--sidebar-w) minmax(0, 1fr);
        gap: var(--gap-lg);
      }
      .right-sidebar {
        display: none;
      }
    }

    @media (max-width: 1024px) {
      .main-grid {
        grid-template-columns: 1fr;
      }
      .sidebar {
        display: none;
      }
    }

    .toc-link {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      font-size: 0.7rem;
      font-weight: 600;
      color: var(--text-[var(--text-muted)]);
      padding: 0.4rem 0;
      transition: var(--transition-main);
      letter-spacing: 0.05em;
    }

    .toc-link:hover {
      color: var(--text);
    }

    .toc-link.active {
      color: var(--accent);
    }

    .toc-link.active::before {
      content: '';
      width: 4px;
      height: 4px;
      background: var(--accent);
      border-radius: 50%;
    }

    .site-nav-link {
      display: flex;
      align-items: center;
      justify-content: space-between;
      font-size: 0.75rem;
      font-weight: 600;
      color: var(--text-[var(--text-muted)]);
      padding: 0.4rem 0.5rem;
      border-radius: var(--radius-interactive);
      transition: var(--transition-main);
    }
    .site-nav-link:hover {
      background: var(--border-faint);
      color: var(--text);
    }
    .site-nav-link.active {
      background: var(--accent-muted);
      color: var(--accent);
    }

    .terminal-header {
      border-bottom: 1px solid var(--border);
      background: var(--bg-alpha);
      backdrop-filter: blur(var(--blur));
      z-index: var(--z-sticky);
    }

    .ledger-line {
      height: 1px;
      background: var(--border);
      margin: 2rem 0;
    }

    .reveal {
      opacity: 0;
      transform: translateY(20px);
      transition: var(--transition-reveal);
    }

    .reveal.active {
      opacity: 1;
      transform: translateY(0);
    }

    .glass-card {
      background-color: var(--surface);
      border: 1px solid var(--border);
      border-radius: var(--radius-card);
      transition: border-color 0.3s ease, transform 0.3s ease, box-shadow 0.3s ease;
    }

    .glass-card:hover {
      border-color: var(--accent-hover);
      box-shadow: var(--glass-shadow);
      transform: translateY(-2px);
    }

    #scroll-progress {
      position: fixed;
      top: 0;
      left: 0;
      height: 2px;
      background: var(--accent);
      z-index: var(--z-progress);
      width: 0;
      transition: width 0.1s ease-out;
    }

    .stagger-1 {
      opacity: 0; transform: translateY(15px);
      animation: customFadeUp 0.6s cubic-bezier(0.22, 1, 0.36, 1) forwards; animation-delay: 0.1s;
    }
    .stagger-2 {
      opacity: 0; transform: translateY(15px);
      animation: customFadeUp 0.6s cubic-bezier(0.22, 1, 0.36, 1) forwards; animation-delay: 0.3s;
    }
    .stagger-3 {
      opacity: 0; transform: translateY(15px);
      animation: customFadeUp 0.6s cubic-bezier(0.22, 1, 0.36, 1) forwards; animation-delay: 0.5s;
    }
    @keyframes customFadeUp {
      to { opacity: 1; transform: translateY(0); }
    }
  </style>
</head>

<body>
  <div id="scroll-progress"></div>
  <div class="selection:bg-[var(--accent-muted)] min-h-screen relative w-full">

    <!-- Status Bar -->
    <div
      class="terminal-header sticky top-0 px-6 py-3 flex items-center justify-between text-[10px] font-semibold tracking-widest text-[var(--text-muted)] mono">
      <div class="flex items-center gap-6">
        <div class="flex items-center gap-2">
          <span class="w-2 h-2 rounded-full bg-[var(--success)] animate-pulse shadow-[0_0_8px_var(--success-alpha)]"></span>
          <span class="text-[var(--text)]">Live</span>
        </div>
        <div class="hidden md:block">Region: Amsterdam, The Netherlands</div>
      </div>
      <div class="flex items-center gap-6">
        <div id="clock">00:00:00 CET</div>
      </div>
    </div>

    <div class="page-container px-6 lg:px-12 py-12">

      <!-- Hero Header -->
      <header class="mb-24 reveal" id="top">
        <div class="flex flex-col lg:flex-row lg:items-end justify-between gap-12">
          <div class="space-y-6">
            <div
              class="inline-flex items-center gap-2 px-3 py-1.5 border border-[var(--accent-border)] bg-[var(--accent-muted)] text-[var(--accent)] text-[10px] font-semibold tracking-widest rounded-full backdrop-blur-sm">
              <iconify-icon icon="lucide:cpu"></iconify-icon> Cognitive Infrastructure
            </div>
            <h1 class="text-6xl md:text-8xl lg:text-9xl font-semibold tracking-tighter leading-none">
              Open<span class="text-[var(--accent)]">Code.</span>
            </h1>
          </div>
          <div class="lg:text-right space-y-6">
            <div class="space-y-1">
              <p class="text-[10px] text-[var(--text-muted)] font-semibold tracking-widest">Master Version</p>
              <p class="text-3xl font-semibold mono text-[var(--zinc-200)]">v1.2.190-STABLE</p>
            </div>
            <div class="flex lg:justify-end gap-3">
              <div
                class="px-4 py-2 border border-[var(--border)] text-[10px] font-semibold tracking-widest rounded bg-[var(--surface)] text-[var(--zinc-300)]">
                Hybrid RAG Fusion
              </div>
              <div class="px-4 py-2 bg-[var(--text)] text-[var(--bg)] text-[10px] font-semibold tracking-widest rounded">
                SpecKit v2.4
              </div>
            </div>
          </div>
        </div>
        <div class="ledger-line mt-16 mb-0"></div>
      </header>

      <div class="main-grid">

        <!-- Left Sidebar: Site Navigation -->
        <aside class="sidebar">
          <nav class="sticky top-24 space-y-8 overflow-y-auto max-h-[calc(100vh-6rem)] pb-8 pr-2">
            <div class="space-y-3">
              <p class="text-[9px] font-semibold tracking-[0.2em] text-[var(--text-muted)] uppercase">Ecosystem</p>
              <div class="flex flex-col gap-1">
                <a href="#overview" class="site-nav-link active"><span>Platform Overview</span> <iconify-icon icon="lucide:chevron-right" class="text-[10px] opacity-50"></iconify-icon></a>
                <a href="#system-flow" class="site-nav-link"><span>Architecture</span></a>
                <a href="#memory-engine" class="site-nav-link"><span>Data Lineage</span></a>
              </div>
            </div>
            <div class="space-y-3">
              <p class="text-[9px] font-semibold tracking-[0.2em] text-[var(--text-muted)] uppercase">Core Systems</p>
              <div class="flex flex-col gap-1">
                <a href="#spec-kit-documentation" class="site-nav-link"><span>Spec Kit Framework</span></a>
                <a href="#memory-engine" class="site-nav-link"><span>Memory Engine</span></a>
                <a href="#agent-network" class="site-nav-link"><span>Agent Routing</span></a>
                <a href="#code-mode-mcp" class="site-nav-link"><span>Code Mode MCP</span></a>
              </div>
            </div>
            <div class="space-y-3">
              <p class="text-[9px] font-semibold tracking-[0.2em] text-[var(--text-muted)] uppercase">Resources</p>
              <div class="flex flex-col gap-1">
                <a href="#" class="site-nav-link"><span>API Reference</span> <iconify-icon icon="lucide:external-link" class="text-[10px] opacity-50"></iconify-icon></a>
                <a href="https://github.com/MichelKerkmeester/opencode-spec-kit-framework" class="site-nav-link"><span>GitHub Repo</span> <iconify-icon icon="lucide:github" class="text-[10px] opacity-50"></iconify-icon></a>
              </div>
            </div>
          </nav>
        </aside>

        <!-- Content Area -->
        <main class="space-y-[clamp(5rem,12vh,10rem)] pb-32">

          <!-- 01 Overview -->
          <section id="overview" class="space-y-10 reveal">
            <div class="space-y-6">
              <div class="inline-flex items-center gap-3 border border-[var(--border)] bg-[var(--surface)] px-3 py-1.5 rounded-full text-[10px] font-semibold tracking-widest text-[var(--zinc-200)] mb-2">
                <span class="w-1.5 h-1.5 rounded-full bg-accent"></span> 01 // OVERVIEW
              </div>

              <div class="space-y-8">
                <p class="text-4xl md:text-5xl lg:text-6xl font-semibold tracking-tighter leading-[1.1] text-zinc-100">
                  Eliminating AI amnesia via continuous searchable history.
                </p>

                <div class="space-y-5">
                  <h3 class="text-xs font-semibold tracking-widest text-[var(--text-muted)] uppercase">What is This?</h3>
                  <p class="text-[var(--zinc-400)] leading-relaxed text-sm md:text-base max-w-3xl">
                    AI coding assistants are powerful, but they have amnesia. Every session starts from zero. You explain your auth system Monday. By Wednesday, it's a blank slate. Architectural decisions? Lost in chat history. Documentation? "I'll do it later" (you won't).
                  </p>
                  <p class="text-[var(--zinc-400)] leading-relaxed text-sm md:text-base max-w-3xl">
                    Two custom-built systems fix this: a <span class="text-[var(--zinc-200)] border-b border-[rgba(255,255,255,0.2)]">spec-kit documentation framework</span> and a <span class="text-[var(--zinc-200)] border-b border-[rgba(255,255,255,0.2)]">cognitive memory MCP server</span> that turn stateless AI sessions into a continuous, searchable development history. Purpose-built for AI-assisted development, not a wrapper around existing tools.
                  </p>
                  <p class="text-[var(--zinc-400)] leading-relaxed text-sm md:text-base max-w-3xl">
                    <strong class="text-[var(--zinc-200)]">Who it's for:</strong> Developers using AI assistants who are tired of re-explaining context every session and losing decisions to chat history while hoping documentation happens "later."
                  </p>
                </div>

                <div class="space-y-5 pt-8" id="system-flow">
                  <h3 class="text-xs font-semibold tracking-widest text-[var(--text-muted)] uppercase">How It All Connects</h3>
                  <div class="relative group code-window rounded-xl overflow-hidden border border-[var(--border)] bg-[var(--surface)] shadow-2xl mb-6">
                    <div class="absolute top-0 left-0 w-full h-9 bg-[var(--surface-l3-alpha)] backdrop-blur border-b border-[var(--border-light)] flex items-center px-4 z-10">
                      <div class="ml-auto flex items-center gap-3">
                        <span class="text-[9px] font-semibold tracking-widest text-[var(--text-muted)] uppercase">ascii-flow</span>
                      </div>
                    </div>
                    <pre class="p-5 pt-14 text-[10px] text-[var(--zinc-300)] mono overflow-x-auto leading-relaxed"><code>┌──────────────────────────────────────────────────────────────┐
│                      YOUR REQUEST                            │
└──────────────────────┬───────────────────────────────────────┘
                       ▼
┌──────────────────────────────────────────────────────────────┐
│  GATE SYSTEM (3 mandatory gates)                             │
│  Gate 1: Understanding ─► Gate 2: Skill Routing ─► Gate 3:   │
│  Context surfacing        Auto-load expertise      Spec      │
│  Dual-threshold           skill_advisor.py         folder    │
│  validation               confidence >= 0.8        HARD BLOCK │
└──────────────────────┬───────────────────────────────────────┘
                       ▼
         ┌─────────────┴──────────────┐
         ▼                            ▼
┌─────────────────┐        ┌─────────────────────┐
│  AGENT NETWORK  │        │  SKILLS LIBRARY     │
│  10 specialized │        │  10 domain skills   │
│  agents with    │◄──────►│  auto-loaded by     │
│  routing logic  │        │  task keywords      │
└────────┬────────┘        └──────────┬──────────┘
         │                            │
         ▼                            ▼
┌──────────────────────────────────────────────────────────────┐
│  MEMORY ENGINE (32 MCP tools: 25 memory + 7 code mode)       │
│  Cognitive tiers ─ Causal graphs ─ Unified Context Engine     │
│  3-channel hybrid: Vector + BM25 + FTS5 (RRF)                │
│  MMR diversity ─ TRM confidence gating ─ query expansion      │
│  Sources: spec memory + constitutional + spec documents      │
│  Embeddings: Voyage | OpenAI | HuggingFace Local (free)      │
└──────────────────────┬───────────────────────────────────────┘
                       ▼
┌──────────────────────────────────────────────────────────────┐
│  SPEC KIT (documentation framework)                          │
│  specs/###-feature/  ─  memory/  ─  scratch/                 │
│  4 levels ─ 81 templates ─ 13 validation rules               │
└──────────────────────────────────────────────────────────────┘</code></pre>
                  </div>
                  <p class="text-sm text-[var(--zinc-400)] max-w-3xl">
                    Everything connects. Memory files live <em>inside</em> spec folders. Gates enforce documentation before any file change. Skills auto-load based on your task. Agents coordinate and delegate. The result: every AI-assisted session is documented, searchable, recoverable and auditable.
                  </p>
                  <p class="text-sm text-[var(--zinc-400)] max-w-3xl">
                    <strong>Local-first</strong>: The Memory Engine runs on your local system with no cloud dependency. See Embedding Providers for optional cloud upgrades.
                  </p>
                </div>

                <!-- Bento Grid Highlights -->
                <div class="pt-8 space-y-5">
                  <h3 class="text-xs font-semibold tracking-widest text-[var(--text-muted)] uppercase">Recent Platform Highlights</h3>
                  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                    <!-- Bento Card 1 -->
                    <div class="p-6 border border-[var(--border)] rounded-2xl bg-gradient-to-br from-[var(--surface)] to-[var(--bg)] hover:border-[var(--accent-hover)] transition-colors md:col-span-2 relative overflow-hidden group shadow-lg">
                      <div class="absolute top-0 right-0 -mt-8 -mr-8 w-32 h-32 bg-[var(--accent-muted)] blur-3xl rounded-full group-hover:bg-[var(--accent-border)] transition-all duration-500"></div>
                      <iconify-icon icon="lucide:network" class="text-2xl text-[var(--zinc-200)] mb-4"></iconify-icon>
                      <p class="text-base font-semibold text-zinc-100 mb-2 tracking-tight">Hybrid RAG Fusion phase tree (spec 139)</p>
                      <p class="text-xs text-[var(--zinc-400)] leading-relaxed max-w-md">The memory engine now covers a full multi-phase rollout: baseline tri-channel retrieval (Vector/BM25/FTS5), deterministic alias/tier fixes, frontmatter normalization, and subsystem hardening.</p>
                    </div>
                    <!-- Bento Card 2 -->
                    <div class="p-6 border border-[var(--border)] rounded-2xl bg-[var(--surface)] hover:border-[var(--zinc-500-alpha)] transition-colors shadow-lg">
                      <iconify-icon icon="lucide:layers" class="text-xl text-[var(--zinc-400)] mb-4"></iconify-icon>
                      <p class="text-sm font-semibold text-[var(--zinc-200)] mb-2 tracking-tight">Hybrid retrieval baseline</p>
                      <p class="text-xs text-[var(--zinc-500)] leading-relaxed">Tri-channel fusion via Reciprocal Rank Fusion, MMR diversity pruning, TRM confidence gating, and multi-query expansion are active.</p>
                    </div>
                    <!-- Bento Card 3 -->
                    <div class="p-6 border border-[var(--border)] rounded-2xl bg-[var(--surface)] hover:border-[var(--zinc-500-alpha)] transition-colors shadow-lg">
                      <iconify-icon icon="lucide:file-json" class="text-xl text-[var(--zinc-400)] mb-4"></iconify-icon>
                      <p class="text-sm font-semibold text-[var(--zinc-200)] mb-2 tracking-tight">Frontmatter normalization</p>
                      <p class="text-xs text-[var(--zinc-500)] leading-relaxed">Managed metadata standardized across templates, spec docs and memory files so dashboard/search titles are unique.</p>
                    </div>
                    <!-- Bento Card 4 -->
                    <div class="p-6 border border-[var(--border)] rounded-2xl bg-[var(--surface)] hover:border-[var(--zinc-500-alpha)] transition-colors shadow-lg">
                      <iconify-icon icon="lucide:folder-tree" class="text-xl text-[var(--zinc-400)] mb-4"></iconify-icon>
                      <p class="text-sm font-semibold text-[var(--zinc-200)] mb-2 tracking-tight">SpecKit Phase System</p>
                      <p class="text-xs text-[var(--zinc-500)] leading-relaxed">Phase-aware recommendation and folder creation (--recommend-phases, --phase) plus recursive validation are integrated.</p>
                    </div>
                    <!-- Bento Card 5 -->
                    <div class="p-6 border border-[var(--border)] rounded-2xl bg-[var(--surface)] hover:border-[var(--zinc-500-alpha)] transition-colors shadow-lg md:col-span-2 lg:col-span-1">
                      <iconify-icon icon="lucide:check-circle" class="text-xl text-[var(--zinc-400)] mb-4"></iconify-icon>
                      <p class="text-sm font-semibold text-[var(--zinc-200)] mb-2 tracking-tight">Code review baseline</p>
                      <p class="text-xs text-[var(--zinc-500)] leading-relaxed">First-class findings-first review baseline with a baseline-plus-overlay contract and mandatory security/correctness minimums.</p>
                    </div>
                    <!-- Bento Card 6 (Wide) -->
                    <div class="p-6 border border-[var(--border)] rounded-2xl bg-[var(--surface)] hover:border-[var(--zinc-500-alpha)] transition-colors md:col-span-2 lg:col-span-3 flex flex-col md:flex-row md:items-center gap-6 shadow-lg">
                      <div class="shrink-0 p-3 rounded-xl bg-[var(--zinc-800-alpha)] border border-[var(--border-light)]">
                        <iconify-icon icon="lucide:terminal-square" class="text-2xl text-[var(--zinc-300)]"></iconify-icon>
                      </div>
                      <div>
                        <p class="text-sm font-semibold text-[var(--zinc-200)] mb-1 tracking-tight">Gemini CLI & Docs Search</p>
                        <p class="text-xs text-[var(--zinc-400)] leading-relaxed">Gemini CLI is the 4th runtime. Spec documents are indexed and searchable. 473 anchor tags across 74 READMEs enable section-level retrieval with ~93% token savings. Runtime DB path standardized to mcp_server/dist/database/context-index.sqlite.</p>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="space-y-5 pt-8">
                  <h3 class="text-[10px] font-semibold tracking-widest text-[var(--text-muted)] uppercase">Requirements</h3>
                  <div class="overflow-hidden border border-[var(--border)] rounded-xl bg-[var(--surface)] shadow-lg">
                    <div class="overflow-x-auto">
                      <table class="w-full text-left text-[11px] mono whitespace-nowrap">
                        <thead>
                          <tr class="border-b border-[var(--border)] bg-[var(--surface-l2)]">
                            <th class="py-4 px-5 text-[var(--text-muted)] font-semibold tracking-widest">Requirement</th>
                            <th class="py-4 px-5 text-[var(--text-muted)] font-semibold tracking-widest">Minimum</th>
                            <th class="py-4 px-5 text-[var(--text-muted)] font-semibold tracking-widest">Recommended</th>
                          </tr>
                        </thead>
                        <tbody class="divide-y divide-[rgba(255,255,255,0.05)]">
                          <tr class="hover:bg-[var(--border-faint)] transition-colors">
                            <td class="py-4 px-5 text-[var(--zinc-200)] font-semibold">OpenCode</td>
                            <td class="py-4 px-5 text-[var(--zinc-300)]">v1.0.190+</td>
                            <td class="py-4 px-5 text-[var(--zinc-300)]">Latest</td>
                          </tr>
                          <tr class="hover:bg-[var(--border-faint)] transition-colors">
                            <td class="py-4 px-5 text-[var(--zinc-200)] font-semibold">Node.js</td>
                            <td class="py-4 px-5 text-[var(--zinc-300)]">v18+</td>
                            <td class="py-4 px-5 text-[var(--zinc-300)]">v20+</td>
                          </tr>
                          <tr class="hover:bg-[var(--border-faint)] transition-colors">
                            <td class="py-4 px-5 text-[var(--zinc-200)] font-semibold">npm</td>
                            <td class="py-4 px-5 text-[var(--zinc-300)]">v9+</td>
                            <td class="py-4 px-5 text-[var(--zinc-300)]">v10+</td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                  </div>
                </div>

              </div>
            </div>
          </section>

          <!-- 02 Quick Start -->
          <section id="quickstart" class="space-y-10 reveal pt-4">
            <div class="inline-flex items-center gap-3 border border-[var(--border)] bg-[var(--surface)] px-3 py-1.5 rounded-full text-[10px] font-semibold tracking-widest text-[var(--zinc-200)] mb-2">
              <span class="w-1.5 h-1.5 rounded-full bg-accent"></span> 02 // QUICK START
            </div>

            <div class="grid grid-cols-1 xl:grid-cols-2 gap-8">
              <div class="space-y-6">
                <div class="glass-card p-6 space-y-4 shadow-lg">
                  <p class="text-[10px] font-semibold text-[var(--text-muted)] tracking-widest uppercase">Prerequisites Checklist</p>
                  <ul class="space-y-3 text-xs text-[var(--zinc-300)] mono">
                    <li class="flex items-center gap-3"><iconify-icon icon="lucide:check-circle"
                        class="text-[var(--success)] text-base"></iconify-icon> OpenCode v1.0.190+ <span
                        class="text-[var(--zinc-600)] text-[10px] ml-auto">opencode --version</span></li>
                    <li class="flex items-center gap-3"><iconify-icon icon="lucide:check-circle"
                        class="text-[var(--success)] text-base"></iconify-icon> Node.js 18+ <span class="text-[var(--zinc-600)] text-[10px] ml-auto">node --version</span></li>
                    <li class="flex items-center gap-3"><iconify-icon icon="lucide:check-circle"
                        class="text-[var(--success)] text-base"></iconify-icon> npm 9+ <span class="text-[var(--zinc-600)] text-[10px] ml-auto">npm --version</span></li>
                  </ul>
                </div>
                
                <h3 class="text-xs font-semibold tracking-widest text-[var(--text-muted)] uppercase pt-2">Verify Installation</h3>
                <div class="relative group code-window mt-4 mb-2 rounded-xl overflow-hidden border border-[var(--border)] bg-[var(--surface)] shadow-2xl">
                  <div class="absolute top-0 left-0 w-full h-9 bg-[var(--surface-l3-alpha)] backdrop-blur border-b border-[var(--border-light)] flex items-center px-4 z-10">
                    <div class="ml-auto flex items-center gap-3">
                      <span class="text-[9px] font-semibold tracking-widest text-[var(--text-muted)] uppercase">bash</span>
                      <button class="text-[var(--text-muted)] hover:text-[var(--text)] transition-colors flex items-center"><iconify-icon icon="lucide:copy" class="text-xs"></iconify-icon></button>
                    </div>
                  </div>
                  <pre class="p-5 pt-14 text-[11px] text-[var(--zinc-300)] mono overflow-x-auto leading-relaxed"><code><span class="text-[var(--zinc-500)]"># Inside OpenCode, test the memory system</span>
<span class="text-[var(--zinc-200)]">/memory:manage</span> health
<span class="text-[var(--zinc-500)]"># Expected: "Status: healthy" with database stats</span>

<span class="text-[var(--zinc-500)]"># Test skill routing</span>
<span class="text-[var(--zinc-500)]"># Ask: "What skills are available?"</span>
<span class="text-[var(--zinc-500)]"># Expected: 11 skills listed</span></code></pre>
                </div>
              </div>

              <div class="h-full flex flex-col space-y-6">
                <h3 class="text-xs font-semibold tracking-widest text-[var(--text-muted)] uppercase">30-Second Setup</h3>
                <div class="relative group code-window rounded-xl overflow-hidden border border-[var(--border)] bg-[var(--surface)] shadow-2xl h-full flex flex-col">
                  <div class="absolute top-0 left-0 w-full h-9 bg-[var(--surface-l3-alpha)] backdrop-blur border-b border-[var(--border-light)] flex items-center px-4 z-10">
                    <div class="ml-auto flex items-center gap-3">
                      <span class="text-[9px] font-semibold tracking-widest text-[var(--text-muted)] uppercase">bash</span>
                      <button class="text-[var(--text-muted)] hover:text-[var(--text)] transition-colors flex items-center"><iconify-icon icon="lucide:copy" class="text-xs"></iconify-icon></button>
                    </div>
                  </div>
                  <pre class="p-5 pt-14 text-[11px] text-[var(--zinc-300)] mono overflow-x-auto leading-relaxed flex-1"><code><span class="text-[var(--zinc-500)]"># 1. Clone the repository</span>
<span class="text-[var(--zinc-200)]">git clone</span> https://github.com/MichelKerkmeester/opencode-spec-kit-framework.git
<span class="text-[var(--zinc-200)]">cd</span> opencode-spec-kit-framework

<span class="text-[var(--zinc-500)]"># 2. Install and build the Memory Engine</span>
<span class="text-[var(--zinc-200)]">cd</span> .opencode/skill/system-spec-kit && <span class="text-[var(--zinc-200)]">npm</span> install && <span class="text-[var(--zinc-200)]">npm run</span> build && <span class="text-[var(--zinc-200)]">cd</span> ../../..

<span class="text-[var(--zinc-500)]"># 3. Launch OpenCode</span>
<span class="text-[var(--success)]">opencode</span></code></pre>
                </div>
              </div>
            </div>
          </section>

          <!-- 03 Spec Kit Documentation -->
          <section id="spec-kit-documentation" class="space-y-10 reveal pt-4">
            <div class="inline-flex items-center gap-3 border border-[var(--border)] bg-[var(--surface)] px-3 py-1.5 rounded-full text-[10px] font-semibold tracking-widest text-[var(--zinc-200)] mb-2">
              <span class="w-1.5 h-1.5 rounded-full bg-accent"></span> 03 // SPEC KIT DOCUMENTATION
            </div>
            
            <div class="space-y-8">
              <p class="text-3xl font-semibold tracking-tighter text-[var(--zinc-200)]">4 levels, 81 templates, 13 rules.</p>
              <p class="text-[var(--zinc-400)] text-sm leading-relaxed max-w-3xl">
                Every feature leaves a trail. Not for bureaucracy. For your future self, your team and the AI that picks up where you left off.
              </p>
            </div>

            <div class="space-y-6">
              <h3 class="text-[10px] font-semibold tracking-widest text-[var(--text-muted)] uppercase">Four Documentation Levels</h3>
              <div class="overflow-hidden border border-[var(--border)] rounded-xl bg-[var(--surface)] shadow-lg">
                <div class="overflow-x-auto">
                  <table class="w-full text-left text-[11px] mono whitespace-nowrap">
                    <thead>
                      <tr class="border-b border-[var(--border)] bg-[var(--surface-l2)]">
                        <th class="py-4 px-5 text-[var(--text-muted)] font-semibold tracking-widest">Level</th>
                        <th class="py-4 px-5 text-[var(--text-muted)] font-semibold tracking-widest">LOC</th>
                        <th class="py-4 px-5 text-[var(--text-muted)] font-semibold tracking-widest">Required Files</th>
                        <th class="py-4 px-5 text-[var(--text-muted)] font-semibold tracking-widest">Use When</th>
                      </tr>
                    </thead>
                    <tbody class="divide-y divide-[rgba(255,255,255,0.05)]">
                      <tr class="hover:bg-[var(--border-faint)] transition-colors">
                        <td class="py-4 px-5 text-[var(--zinc-200)] font-semibold">1</td>
                        <td class="py-4 px-5 text-[var(--zinc-300)]">&lt;100</td>
                        <td class="py-4 px-5 text-[var(--zinc-300)]">spec.md, plan.md, tasks.md, summary.md</td>
                        <td class="py-4 px-5 text-[var(--zinc-400)]">All features (minimum)</td>
                      </tr>
                      <tr class="hover:bg-[var(--border-faint)] transition-colors">
                        <td class="py-4 px-5 text-[var(--zinc-200)] font-semibold">2</td>
                        <td class="py-4 px-5 text-[var(--zinc-300)]">100-499</td>
                        <td class="py-4 px-5 text-[var(--zinc-300)]">Level 1 + checklist.md</td>
                        <td class="py-4 px-5 text-[var(--zinc-400)]">QA validation needed</td>
                      </tr>
                      <tr class="hover:bg-[var(--border-faint)] transition-colors">
                        <td class="py-4 px-5 text-[var(--zinc-200)] font-semibold">3</td>
                        <td class="py-4 px-5 text-[var(--zinc-300)]">&gt;=500</td>
                        <td class="py-4 px-5 text-[var(--zinc-300)]">Level 2 + decision-record.md</td>
                        <td class="py-4 px-5 text-[var(--zinc-400)]">Complex/architecture changes</td>
                      </tr>
                      <tr class="hover:bg-[var(--border-faint)] transition-colors">
                        <td class="py-4 px-5 text-[var(--zinc-200)] font-semibold">3+</td>
                        <td class="py-4 px-5 text-[var(--zinc-300)]">Comp 80+</td>
                        <td class="py-4 px-5 text-[var(--zinc-300)]">Level 3 + AI protocols, extended checklist</td>
                        <td class="py-4 px-5 text-[var(--zinc-400)]">Enterprise governance</td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>

            <div class="space-y-6 pt-6">
              <h3 class="text-[10px] font-semibold tracking-widest text-[var(--text-muted)] uppercase">CORE + ADDENDUM Template Architecture</h3>
              <p class="text-[var(--zinc-400)] text-sm leading-relaxed max-w-3xl">
                <strong>81 templates</strong> across the v2.2 composition model. CORE templates are shared across levels. ADDENDUM templates extend them. Update CORE once and all levels inherit. Zero duplication.
              </p>
              
              <div class="overflow-hidden border border-[var(--border)] rounded-xl bg-[var(--surface)] shadow-lg">
                <div class="overflow-x-auto">
                  <table class="w-full text-left text-[11px] mono whitespace-nowrap">
                    <thead>
                      <tr class="border-b border-[var(--border)] bg-[var(--surface-l2)]">
                        <th class="py-4 px-5 text-[var(--text-muted)] font-semibold tracking-widest">Template</th>
                        <th class="py-4 px-5 text-[var(--text-muted)] font-semibold tracking-widest">Purpose</th>
                      </tr>
                    </thead>
                    <tbody class="divide-y divide-[rgba(255,255,255,0.05)]">
                      <tr class="hover:bg-[var(--border-faint)] transition-colors">
                        <td class="py-4 px-5 text-[var(--zinc-200)] font-semibold">spec.md</td>
                        <td class="py-4 px-5 text-[var(--zinc-300)]">Feature scope, requirements, constraints (frozen)</td>
                      </tr>
                      <tr class="hover:bg-[var(--border-faint)] transition-colors">
                        <td class="py-4 px-5 text-[var(--zinc-200)] font-semibold">plan.md</td>
                        <td class="py-4 px-5 text-[var(--zinc-300)]">Implementation approach and design decisions</td>
                      </tr>
                      <tr class="hover:bg-[var(--border-faint)] transition-colors">
                        <td class="py-4 px-5 text-[var(--zinc-200)] font-semibold">tasks.md</td>
                        <td class="py-4 px-5 text-[var(--zinc-300)]">Ordered task breakdown with status tracking</td>
                      </tr>
                      <tr class="hover:bg-[var(--border-faint)] transition-colors">
                        <td class="py-4 px-5 text-[var(--zinc-200)] font-semibold">checklist.md</td>
                        <td class="py-4 px-5 text-[var(--zinc-300)]">QA validation items (P0/P1/P2 priority)</td>
                      </tr>
                      <tr class="hover:bg-[var(--border-faint)] transition-colors">
                        <td class="py-4 px-5 text-[var(--zinc-200)] font-semibold">decision-record.md</td>
                        <td class="py-4 px-5 text-[var(--zinc-300)]">Architectural decisions with rationale and trade-offs</td>
                      </tr>
                      <tr class="hover:bg-[var(--border-faint)] transition-colors">
                        <td class="py-4 px-5 text-[var(--zinc-200)] font-semibold">research.md</td>
                        <td class="py-4 px-5 text-[var(--zinc-300)]">Technical investigation findings (optional, L3+)</td>
                      </tr>
                      <tr class="hover:bg-[var(--border-faint)] transition-colors">
                        <td class="py-4 px-5 text-[var(--zinc-200)] font-semibold">implementation-summary.md</td>
                        <td class="py-4 px-5 text-[var(--zinc-300)]">Post-implementation record of what was built</td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>

            <div class="grid grid-cols-1 xl:grid-cols-2 gap-8 pt-6">
              <div class="space-y-6">
                <h3 class="text-[10px] font-semibold tracking-widest text-[var(--text-muted)] uppercase">Validation and Automation</h3>
                <p class="text-[var(--zinc-400)] text-sm leading-relaxed">
                  <strong>13 pluggable validation rules</strong> run before you can mark any spec folder complete. Exit code 0 = pass. Exit code 2 = must fix.
                </p>
                <div class="glass-card p-6 mono text-[10px] space-y-3">
                  <div class="flex justify-between border-b border-[var(--border-light)] pb-2"><span class="text-[var(--zinc-200)]">check-anchors</span><span class="text-[var(--text-muted)]">Reference integrity</span></div>
                  <div class="flex justify-between border-b border-[var(--border-light)] pb-2"><span class="text-[var(--zinc-200)]">check-placeholders</span><span class="text-[var(--text-muted)]">No [PLACEHOLDER] text</span></div>
                  <div class="flex justify-between border-b border-[var(--border-light)] pb-2"><span class="text-[var(--zinc-200)]">check-frontmatter</span><span class="text-[var(--text-muted)]">YAML metadata present</span></div>
                  <div class="flex justify-between border-b border-[var(--border-light)] pb-2"><span class="text-[var(--zinc-200)]">check-sections</span><span class="text-[var(--text-muted)]">Required sections exist</span></div>
                  <div class="flex justify-between border-b border-[var(--border-light)] pb-2"><span class="text-[var(--zinc-200)]">check-complexity</span><span class="text-[var(--text-muted)]">Matches doc level</span></div>
                  <div class="flex justify-between border-b border-[var(--border-light)] pb-2"><span class="text-[var(--zinc-200)]">check-evidence</span><span class="text-[var(--text-muted)]">Evidence citations present</span></div>
                  <div class="flex justify-between border-b border-[var(--border-light)] pb-2"><span class="text-[var(--zinc-200)]">check-priority-tags</span><span class="text-[var(--text-muted)]">P0/P1/P2 tags applied</span></div>
                  <div class="flex justify-between border-b border-[var(--border-light)] pb-2"><span class="text-[var(--zinc-200)]">check-files</span><span class="text-[var(--text-muted)]">Required files exist</span></div>
                  <div class="flex justify-between"><span class="text-[var(--zinc-200)]">+ 5 more rules</span><span class="text-[var(--text-muted)]">Level match, protocols, etc.</span></div>
                </div>
              </div>

              <div class="space-y-6">
                <h3 class="text-[10px] font-semibold tracking-widest text-[var(--text-muted)] uppercase">Frontmatter Normalization</h3>
                <p class="text-[var(--zinc-400)] text-sm leading-relaxed">
                  Spec 139/004 adds a metadata normalization workflow for all indexed markdown.
                </p>
                <div class="relative group code-window rounded-xl overflow-hidden border border-[var(--border)] bg-[var(--surface)] shadow-2xl h-full flex flex-col">
                  <div class="absolute top-0 left-0 w-full h-9 bg-[var(--surface-l3-alpha)] backdrop-blur border-b border-[var(--border-light)] flex items-center px-4 z-10">
                    <div class="ml-auto flex items-center gap-3">
                      <span class="text-[9px] font-semibold tracking-widest text-[var(--text-muted)] uppercase">bash</span>
                    </div>
                  </div>
                  <pre class="p-5 pt-14 text-[11px] text-[var(--zinc-300)] mono overflow-x-auto leading-relaxed flex-1"><code><span class="text-[var(--zinc-500)]"># 1) Dry-run metadata normalization</span>
node scripts/dist/memory/backfill-frontmatter.js --dry-run

<span class="text-[var(--zinc-500)]"># 2) Apply metadata normalization</span>
node scripts/dist/memory/backfill-frontmatter.js --apply

<span class="text-[var(--zinc-500)]"># 3) Verify composed templates</span>
bash scripts/templates/compose.sh --verify

<span class="text-[var(--zinc-500)]"># 4) Rebuild embeddings index</span>
node scripts/dist/memory/reindex-embeddings.js</code></pre>
                </div>
              </div>
            </div>

          </section>

          <!-- 04 Memory Engine -->
          <section id="memory-engine" class="space-y-10 reveal pt-4">
            <div class="inline-flex items-center gap-3 border border-[var(--border)] bg-[var(--surface)] px-3 py-1.5 rounded-full text-[10px] font-semibold tracking-widest text-[var(--zinc-200)] mb-2">
              <span class="w-1.5 h-1.5 rounded-full bg-accent"></span> 04 // MEMORY ENGINE
            </div>
            
            <div class="space-y-8">
              <p class="text-3xl font-semibold tracking-tighter text-[var(--zinc-200)]">25 MCP tools across 7 cognitive layers.</p>
              <p class="text-[var(--zinc-400)] text-sm leading-relaxed max-w-3xl border-l-2 border-accent pl-4 italic bg-[var(--accent-muted)] p-4 rounded-r">
                "Remember everything. Surface what matters. Keep it private."
              </p>
              <p class="text-[var(--zinc-400)] text-sm leading-relaxed max-w-3xl">
                Your AI assistant forgets everything between sessions. The Memory Engine fixes this with 23 MCP tools across 7 architectural layers: 3-source indexing, 7-intent retrieval routing, schema v15 metadata and document-type scoring. The Unified Context Engine adds a 3-channel hybrid retrieval pipeline with RRF fusion, MMR diversity pruning, confidence gating and causal graph enrichment.
              </p>
            </div>

            <div class="space-y-6 pt-4">
              <h3 class="text-[10px] font-semibold tracking-widest text-[var(--text-muted)] uppercase">3-Source Discovery Pipeline</h3>
              <div class="overflow-hidden border border-[var(--border)] rounded-xl bg-[var(--surface)] shadow-lg">
                <div class="overflow-x-auto">
                  <table class="w-full text-left text-[11px] mono whitespace-nowrap">
                    <thead>
                      <tr class="border-b border-[var(--border)] bg-[var(--surface-l2)]">
                        <th class="py-4 px-5 text-[var(--text-muted)] font-semibold tracking-widest">Source</th>
                        <th class="py-4 px-5 text-[var(--text-muted)] font-semibold tracking-widest">Discovery Path</th>
                        <th class="py-4 px-5 text-[var(--text-muted)] font-semibold tracking-widest">Weight</th>
                        <th class="py-4 px-5 text-[var(--text-muted)] font-semibold tracking-widest">What Gets Indexed</th>
                      </tr>
                    </thead>
                    <tbody class="divide-y divide-[rgba(255,255,255,0.05)]">
                      <tr class="hover:bg-[var(--border-faint)] transition-colors">
                        <td class="py-4 px-5 text-[var(--zinc-200)] font-semibold">Constitutional docs</td>
                        <td class="py-4 px-5 text-[var(--zinc-300)]">constitutional.md</td>
                        <td class="py-4 px-5 text-[var(--zinc-300)]">1.0</td>
                        <td class="py-4 px-5 text-[var(--zinc-400)]">System rules (never decay, always surface)</td>
                      </tr>
                      <tr class="hover:bg-[var(--border-faint)] transition-colors">
                        <td class="py-4 px-5 text-[var(--zinc-200)] font-semibold">Spec folder docs</td>
                        <td class="py-4 px-5 text-[var(--zinc-300)]">.opencode/specs/**/*.md</td>
                        <td class="py-4 px-5 text-[var(--zinc-300)]">0.6-0.8</td>
                        <td class="py-4 px-5 text-[var(--zinc-400)]">Specs, plans, tasks, decisions</td>
                      </tr>
                      <tr class="hover:bg-[var(--border-faint)] transition-colors">
                        <td class="py-4 px-5 text-[var(--zinc-200)] font-semibold">Memory files</td>
                        <td class="py-4 px-5 text-[var(--zinc-300)]">specs/###/memory/*.md</td>
                        <td class="py-4 px-5 text-[var(--zinc-300)]">0.5</td>
                        <td class="py-4 px-5 text-[var(--zinc-400)]">Session context, decisions, progress</td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>

            <div class="grid grid-cols-1 xl:grid-cols-2 gap-8 pt-6">
              <div class="space-y-6">
                <h3 class="text-[10px] font-semibold tracking-widest text-[var(--text-muted)] uppercase">Cognitive Features</h3>
                <p class="text-[var(--zinc-400)] text-sm leading-relaxed">
                  Not basic vector storage. Inspired by biological working memory with cognitive subsystems.
                </p>
                <div class="space-y-4 text-sm text-[var(--zinc-300)]">
                  <div class="p-4 border border-[var(--border)] rounded-xl bg-[var(--surface)]">
                    <p class="font-semibold text-[var(--zinc-200)] mb-2">Attention-Based Decay</p>
                    <p class="text-xs text-[var(--zinc-400)]">Memory relevance decays using <code>recency x frequency x importance</code> scoring. Constitutional tier (1.0) never decays, Normal (0.8) fades gradually.</p>
                  </div>
                  <div class="p-4 border border-[var(--border)] rounded-xl bg-[var(--surface)]">
                    <p class="font-semibold text-[var(--zinc-200)] mb-2">Tiered Content Injection</p>
                    <p class="text-xs text-[var(--zinc-400)]">HOT (>= 0.8) full content, WARM (0.25 - 0.79) summary only, COLD (< 0.25) trigger phrases only.</p>
                  </div>
                  <div class="p-4 border border-[var(--border)] rounded-xl bg-[var(--surface)]">
                    <p class="font-semibold text-[var(--zinc-200)] mb-2">Spreading Activation</p>
                    <p class="text-xs text-[var(--zinc-400)]">When a primary memory is activated, semantically related memories receive a 0.35 score boost.</p>
                  </div>
                </div>
              </div>

              <div class="space-y-6">
                <h3 class="text-[10px] font-semibold tracking-widest text-[var(--text-muted)] uppercase">Hybrid Search & Causal Graph</h3>
                <p class="text-[var(--zinc-400)] text-sm leading-relaxed">
                  Three retrieval channels fuse via Reciprocal Rank Fusion (RRF) in the Unified Context Engine.
                </p>
                <ul class="space-y-3 text-sm text-[var(--zinc-400)]">
                  <li class="flex items-center gap-3"><iconify-icon icon="lucide:arrow-right" class="text-[var(--zinc-200)]"></iconify-icon> <strong>Vector:</strong> Semantic similarity</li>
                  <li class="flex items-center gap-3"><iconify-icon icon="lucide:arrow-right" class="text-[var(--zinc-200)]"></iconify-icon> <strong>BM25 Keyword:</strong> Technical terms</li>
                  <li class="flex items-center gap-3"><iconify-icon icon="lucide:arrow-right" class="text-[var(--zinc-200)]"></iconify-icon> <strong>FTS5:</strong> Exact substring matching</li>
                </ul>

                <h4 class="text-[10px] font-semibold tracking-widest text-[var(--text-muted)] uppercase pt-4">Causal Memory Graph</h4>
                <div class="glass-card p-6 mono text-[10px] space-y-3">
                  <div class="flex gap-4"><span class="text-[var(--zinc-200)] w-24">caused</span><span class="text-[var(--text-muted)]">JWT decision → token refresh</span></div>
                  <div class="flex gap-4"><span class="text-[var(--zinc-200)] w-24">derived_from</span><span class="text-[var(--text-muted)]">rate limiter ← load test results</span></div>
                  <div class="flex gap-4"><span class="text-[var(--zinc-200)] w-24">supports</span><span class="text-[var(--text-muted)]">performance benchmarks → caching decision</span></div>
                  <div class="flex gap-4"><span class="text-[var(--zinc-200)] w-24">supersedes</span><span class="text-[var(--text-muted)]">v2 auth flow → v1 auth flow</span></div>
                  <div class="flex gap-4"><span class="text-[var(--zinc-200)] w-24">contradicts</span><span class="text-[var(--text-muted)]">stateless ↔ session storage</span></div>
                </div>
              </div>
            </div>
          </section>

          <!-- 05 Agent Network -->
          <section id="agent-network" class="space-y-10 reveal pt-4">
            <div class="inline-flex items-center gap-3 border border-[var(--border)] bg-[var(--surface)] px-3 py-1.5 rounded-full text-[10px] font-semibold tracking-widest text-[var(--zinc-200)] mb-2">
              <span class="w-1.5 h-1.5 rounded-full bg-accent"></span> 05 // AGENT NETWORK
            </div>
            
            <div class="space-y-8">
              <p class="text-3xl font-semibold tracking-tighter text-[var(--zinc-200)]">11 specialized agents with role-based routing.</p>
              <p class="text-[var(--zinc-400)] text-sm leading-relaxed max-w-3xl">
                Eleven specialized agents prevent AI assistants from making assumptions, skipping documentation, creating technical debt and drifting from scope. Two are built into OpenCode. Nine are custom agents. 11 specialized agents across 4 runtime platforms.
              </p>
            </div>

            <div class="space-y-6 pt-4">
              <h3 class="text-[10px] font-semibold tracking-widest text-[var(--text-muted)] uppercase">All Agents</h3>
              <div class="overflow-hidden border border-[var(--border)] rounded-xl bg-[var(--surface)] shadow-lg">
                <div class="overflow-x-auto">
                  <table class="w-full text-left text-[11px] mono whitespace-nowrap">
                    <thead>
                      <tr class="border-b border-[var(--border)] bg-[var(--surface-l2)]">
                        <th class="py-4 px-5 text-[var(--text-muted)] font-semibold tracking-widest">Agent</th>
                        <th class="py-4 px-5 text-[var(--text-muted)] font-semibold tracking-widest">Type</th>
                        <th class="py-4 px-5 text-[var(--text-muted)] font-semibold tracking-widest">Model</th>
                        <th class="py-4 px-5 text-[var(--text-muted)] font-semibold tracking-widest">Role</th>
                      </tr>
                    </thead>
                    <tbody class="divide-y divide-[rgba(255,255,255,0.05)]">
                      <tr class="hover:bg-[var(--border-faint)] transition-colors">
                        <td class="py-4 px-5 text-[var(--zinc-200)] font-semibold">@general / @explore</td>
                        <td class="py-4 px-5 text-[var(--zinc-300)]">Built-in</td>
                        <td class="py-4 px-5 text-[var(--zinc-500)]">-</td>
                        <td class="py-4 px-5 text-[var(--zinc-400)]">Implementation, quick exploration</td>
                      </tr>
                      <tr class="hover:bg-[var(--border-faint)] transition-colors">
                        <td class="py-4 px-5 text-[var(--zinc-200)] font-semibold">@orchestrate</td>
                        <td class="py-4 px-5 text-[var(--zinc-300)]">Custom</td>
                        <td class="py-4 px-5 text-[var(--zinc-300)]">Primary</td>
                        <td class="py-4 px-5 text-[var(--zinc-400)]">Multi-agent coordination</td>
                      </tr>
                      <tr class="hover:bg-[var(--border-faint)] transition-colors">
                        <td class="py-4 px-5 text-[var(--zinc-200)] font-semibold">@speckit</td>
                        <td class="py-4 px-5 text-[var(--zinc-300)]">Custom</td>
                        <td class="py-4 px-5 text-[var(--zinc-300)]">claude-sonnet</td>
                        <td class="py-4 px-5 text-[var(--zinc-400)]">Spec folder creation (exclusive writer)</td>
                      </tr>
                      <tr class="hover:bg-[var(--border-faint)] transition-colors">
                        <td class="py-4 px-5 text-[var(--zinc-200)] font-semibold">@debug</td>
                        <td class="py-4 px-5 text-[var(--zinc-300)]">Custom</td>
                        <td class="py-4 px-5 text-[var(--zinc-300)]">claude-opus</td>
                        <td class="py-4 px-5 text-[var(--zinc-400)]">Fresh-perspective debugging</td>
                      </tr>
                      <tr class="hover:bg-[var(--border-faint)] transition-colors">
                        <td class="py-4 px-5 text-[var(--zinc-200)] font-semibold">@research</td>
                        <td class="py-4 px-5 text-[var(--zinc-300)]">Custom</td>
                        <td class="py-4 px-5 text-[var(--zinc-300)]">claude-opus</td>
                        <td class="py-4 px-5 text-[var(--zinc-400)]">Evidence gathering</td>
                      </tr>
                      <tr class="hover:bg-[var(--border-faint)] transition-colors">
                        <td class="py-4 px-5 text-[var(--zinc-200)] font-semibold">@review / @write</td>
                        <td class="py-4 px-5 text-[var(--zinc-300)]">Custom</td>
                        <td class="py-4 px-5 text-[var(--zinc-300)]">varies</td>
                        <td class="py-4 px-5 text-[var(--zinc-400)]">Code review, Documentation</td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </section>

          <!-- 06 Command Architecture -->
          <section id="command-architecture" class="space-y-10 reveal pt-4">
            <div class="inline-flex items-center gap-3 border border-[var(--border)] bg-[var(--surface)] px-3 py-1.5 rounded-full text-[10px] font-semibold tracking-widest text-[var(--zinc-200)] mb-2">
              <span class="w-1.5 h-1.5 rounded-full bg-accent"></span> 06 // COMMAND ARCHITECTURE
            </div>
            
            <div class="space-y-8">
              <p class="text-[var(--zinc-400)] text-sm leading-relaxed max-w-3xl">
                20 commands across 4 namespaces with 25 YAML assets. Markdown entry points route to YAML execution engines. One prompt. Twelve steps. Zero manual overhead.
              </p>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 pt-4">
              <div class="space-y-4">
                <h3 class="text-xs font-semibold tracking-widest text-[var(--text-muted)] uppercase">spec_kit/ (8 commands)</h3>
                <div class="overflow-x-auto border border-[var(--border)] rounded-xl bg-[var(--surface)] shadow-lg">
                  <table class="w-full text-left text-[11px] mono">
                    <tbody class="divide-y divide-[rgba(255,255,255,0.05)]">
                      <tr class="hover:bg-[var(--border-faint)] transition-colors">
                        <td class="py-3 px-4 text-[var(--zinc-200)] font-semibold">/spec_kit:complete</td>
                        <td class="py-3 px-4 text-[var(--zinc-400)]">Full workflow</td>
                      </tr>
                      <tr class="hover:bg-[var(--border-faint)] transition-colors">
                        <td class="py-3 px-4 text-[var(--zinc-200)] font-semibold">/spec_kit:plan</td>
                        <td class="py-3 px-4 text-[var(--zinc-400)]">Planning only</td>
                      </tr>
                      <tr class="hover:bg-[var(--border-faint)] transition-colors">
                        <td class="py-3 px-4 text-[var(--zinc-200)] font-semibold">/spec_kit:implement</td>
                        <td class="py-3 px-4 text-[var(--zinc-400)]">Execute plan</td>
                      </tr>
                      <tr class="hover:bg-[var(--border-faint)] transition-colors">
                        <td class="py-3 px-4 text-[var(--zinc-200)] font-semibold">/spec_kit:debug</td>
                        <td class="py-3 px-4 text-[var(--zinc-400)]">Delegate to sub-agent</td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>

              <div class="space-y-4">
                <h3 class="text-xs font-semibold tracking-widest text-[var(--text-muted)] uppercase">memory/ (5 commands)</h3>
                <div class="overflow-x-auto border border-[var(--border)] rounded-xl bg-[var(--surface)] shadow-lg">
                  <table class="w-full text-left text-[11px] mono">
                    <tbody class="divide-y divide-[rgba(255,255,255,0.05)]">
                      <tr class="hover:bg-[var(--border-faint)] transition-colors">
                        <td class="py-3 px-4 text-[var(--zinc-200)] font-semibold">/memory:save</td>
                        <td class="py-3 px-4 text-[var(--zinc-400)]">Extracts and indexes</td>
                      </tr>
                      <tr class="hover:bg-[var(--border-faint)] transition-colors">
                        <td class="py-3 px-4 text-[var(--zinc-200)] font-semibold">/memory:context</td>
                        <td class="py-3 px-4 text-[var(--zinc-400)]">Unified retrieval</td>
                      </tr>
                      <tr class="hover:bg-[var(--border-faint)] transition-colors">
                        <td class="py-3 px-4 text-[var(--zinc-200)] font-semibold">/memory:continue</td>
                        <td class="py-3 px-4 text-[var(--zinc-400)]">Session recovery</td>
                      </tr>
                      <tr class="hover:bg-[var(--border-faint)] transition-colors">
                        <td class="py-3 px-4 text-[var(--zinc-200)] font-semibold">/memory:manage</td>
                        <td class="py-3 px-4 text-[var(--zinc-400)]">Database ops</td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </section>

          <!-- 07 Skills Library -->
          <section id="skills-library" class="space-y-10 reveal pt-4">
            <div class="inline-flex items-center gap-3 border border-[var(--border)] bg-[var(--surface)] px-3 py-1.5 rounded-full text-[10px] font-semibold tracking-widest text-[var(--zinc-200)] mb-2">
              <span class="w-1.5 h-1.5 rounded-full bg-accent"></span> 07 // SKILLS LIBRARY
            </div>
            
            <div class="space-y-8">
              <p class="text-3xl font-semibold tracking-tighter text-[var(--zinc-200)]">11 domain skills, auto-loaded.</p>
              <p class="text-[var(--zinc-400)] text-sm leading-relaxed max-w-3xl">
                Skills are domain expertise on demand. The AI loads the right skill and already knows your conventions.
              </p>
            </div>

            <div class="space-y-6 pt-4">
              <h3 class="text-[10px] font-semibold tracking-widest text-[var(--text-muted)] uppercase">Multi-Stack Auto-Detection</h3>
              <p class="text-sm text-[var(--zinc-400)]"><code>skill_advisor.py</code> analyzes your request keywords. Confidence >= 0.8 = skill auto-loads.</p>
              
              <div class="glass-card p-6 mono text-[10px] space-y-4">
                <div class="flex justify-between border-b border-[var(--border-light)] pb-2">
                  <span class="font-semibold text-[var(--zinc-200)]">Go</span>
                  <span class="text-[var(--text-muted)]">go.mod</span>
                </div>
                <div class="flex justify-between border-b border-[var(--border-light)] pb-2">
                  <span class="font-semibold text-[var(--zinc-200)]">Node.js</span>
                  <span class="text-[var(--text-muted)]">pkg.json "express"</span>
                </div>
                <div class="flex justify-between border-b border-[var(--border-light)] pb-2">
                  <span class="font-semibold text-[var(--zinc-200)]">React</span>
                  <span class="text-[var(--text-muted)]">next.config.js</span>
                </div>
                <div class="flex justify-between border-b border-[var(--border-light)] pb-2">
                  <span class="font-semibold text-[var(--zinc-200)]">React Native</span>
                  <span class="text-[var(--text-muted)]">app.json "expo"</span>
                </div>
                <div class="flex justify-between">
                  <span class="font-semibold text-[var(--zinc-200)]">Swift</span>
                  <span class="text-[var(--text-muted)]">Package.swift</span>
                </div>
              </div>
            </div>
          </section>

          <!-- 08 Gate System -->
          <section id="gate-system" class="space-y-10 reveal pt-4">
            <div class="inline-flex items-center gap-3 border border-[var(--border)] bg-[var(--surface)] px-3 py-1.5 rounded-full text-[10px] font-semibold tracking-widest text-[var(--zinc-200)] mb-2">
              <span class="w-1.5 h-1.5 rounded-full bg-accent"></span> 08 // GATE SYSTEM
            </div>
            
            <div class="space-y-8">
              <p class="text-[var(--zinc-400)] text-sm leading-relaxed max-w-3xl">
                Every request passes through 3 mandatory gates before the AI touches a single file. Enforced, not suggested. No exceptions.
              </p>
              <div class="p-6 border border-[var(--border)] bg-[var(--surface)] rounded-xl text-center mono text-xs text-[var(--zinc-200)] shadow-inner">
                Request ──► Gate 1 (SOFT) ──► Gate 2 (REQUIRED) ──► Gate 3 (HARD) ──► Execute
              </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-8 pt-4">
              <div class="p-6 border border-[var(--border)] rounded-xl bg-[var(--surface)] space-y-3 shadow-lg">
                <h4 class="font-semibold text-[var(--zinc-200)] text-sm">Gate 1: Understanding</h4>
                <p class="text-[10px] text-[var(--text-muted)] tracking-widest font-semibold uppercase">Soft Block</p>
                <p class="text-xs text-[var(--zinc-400)]">Dual-threshold validation: READINESS = (confidence >= 0.70) AND (uncertainty <= 0.35).</p>
              </div>
              <div class="p-6 border border-[var(--border)] rounded-xl bg-[var(--surface)] space-y-3 shadow-lg">
                <h4 class="font-semibold text-[var(--zinc-200)] text-sm">Gate 2: Skill Routing</h4>
                <p class="text-[10px] text-[var(--text-muted)] tracking-widest font-semibold uppercase">Required</p>
                <p class="text-xs text-[var(--zinc-400)]">Runs <code>skill_advisor.py</code> against keywords. Confidence >= 0.8 mandates loading.</p>
              </div>
              <div class="p-6 border border-[var(--border)] rounded-xl bg-[var(--surface)] space-y-3 shadow-lg">
                <h4 class="font-semibold text-[var(--zinc-200)] text-sm">Gate 3: Spec Folder</h4>
                <p class="text-[10px] text-red-500 tracking-widest font-semibold uppercase">Hard Block</p>
                <p class="text-xs text-[var(--zinc-400)]">No file changes without answering: Use existing? Create new? Update related? Skip?</p>
              </div>
            </div>
          </section>

          <!-- 09 Code Mode MCP -->
          <section id="code-mode-mcp" class="space-y-10 reveal pt-4">
            <div class="inline-flex items-center gap-3 border border-[var(--border)] bg-[var(--surface)] px-3 py-1.5 rounded-full text-[10px] font-semibold tracking-widest text-[var(--zinc-200)] mb-2">
              <span class="w-1.5 h-1.5 rounded-full bg-accent"></span> 09 // CODE MODE MCP
            </div>
            
            <div class="space-y-8">
              <p class="text-3xl font-semibold tracking-tighter text-[var(--zinc-200)]">
                98.7% context token savings.
              </p>
              <p class="text-[var(--zinc-400)] text-sm leading-relaxed max-w-3xl">
                External tool integration via TypeScript execution. Instead of loading all tool definitions into context
                upfront, Code Mode uses progressive disclosure.
              </p>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
              <div class="relative group code-window rounded-xl overflow-hidden border border-[var(--border)] bg-[var(--surface)] shadow-2xl h-full flex flex-col">
                <div class="absolute top-0 left-0 w-full h-9 bg-[var(--surface-l3-alpha)] backdrop-blur border-b border-[var(--border-light)] flex items-center px-4 z-10">
                  <div class="ml-auto flex items-center gap-3">
                    <span class="text-[9px] font-semibold tracking-widest text-[var(--text-muted)] uppercase">typescript</span>
                    <button class="text-[var(--text-muted)] hover:text-[var(--text)] transition-colors flex items-center"><iconify-icon icon="lucide:copy" class="text-xs"></iconify-icon></button>
                  </div>
                </div>
                <pre class="p-5 pt-14 text-[11px] text-[var(--zinc-300)] mono overflow-x-auto leading-relaxed flex-1"><code><span class="text-[var(--zinc-500)]">// 1. Discover relevant tools</span>
<span class="text-[var(--zinc-200)]">search_tools</span>({ task_description: <span class="text-[var(--success)]">"site management"</span> })

<span class="text-[var(--zinc-500)]">// 2. Get parameter details</span>
<span class="text-[var(--zinc-200)]">tool_info</span>({ tool_name: <span class="text-[var(--success)]">"sites_list"</span> })

<span class="text-[var(--zinc-500)]">// 3. Execute securely</span>
<span class="text-[var(--zinc-200)]">call_tool_chain</span>({ 
  code: <span class="text-[var(--success)]">"await webflow.sites_list({})"</span> 
})</code></pre>
              </div>

              <div class="glass-card p-6 flex flex-col justify-center space-y-6 shadow-lg border-[var(--border)]">
                <h3 class="text-[10px] font-semibold tracking-widest text-[var(--text-muted)] uppercase">Performance Metrics</h3>
                <div class="space-y-4">
                  <div class="flex items-center justify-between border-b border-[var(--border-light)] pb-3">
                    <span class="text-xs font-semibold text-[var(--zinc-300)]">Context tokens</span>
                    <span class="text-xs mono text-[var(--success)] flex items-center gap-1"><iconify-icon icon="lucide:arrow-down"></iconify-icon> 1.6k (was 141k)</span>
                  </div>
                  <div class="flex items-center justify-between border-b border-[var(--border-light)] pb-3">
                    <span class="text-xs font-semibold text-[var(--zinc-300)]">Execution trips</span>
                    <span class="text-xs mono text-[var(--success)] flex items-center gap-1"><iconify-icon icon="lucide:zap"></iconify-icon> 1 combined TS call</span>
                  </div>
                  <div class="flex items-center justify-between pb-1">
                    <span class="text-xs font-semibold text-[var(--zinc-300)]">Safety</span>
                    <span class="text-xs mono text-[var(--success)] flex items-center gap-1"><iconify-icon icon="lucide:shield-check"></iconify-icon> Type-safe</span>
                  </div>
                </div>
              </div>
            </div>
          </section>

          <!-- 10 Extensibility -->
          <section id="extensibility" class="space-y-10 reveal pt-4">
            <div class="inline-flex items-center gap-3 border border-[var(--border)] bg-[var(--surface)] px-3 py-1.5 rounded-full text-[10px] font-semibold tracking-widest text-[var(--zinc-200)] mb-2">
              <span class="w-1.5 h-1.5 rounded-full bg-accent"></span> 10 // EXTENSIBILITY
            </div>
            
            <div class="space-y-8">
              <p class="text-[var(--zinc-400)] text-sm leading-relaxed max-w-3xl">
                Every component follows standardized patterns for customization:
              </p>
              <ul class="space-y-3 text-sm text-[var(--zinc-400)] max-w-3xl">
                <li><strong class="text-[var(--zinc-200)]">Custom Skills:</strong> <code>/create:skill my-skill</code>. Auto-detected by skill_advisor.py.</li>
                <li><strong class="text-[var(--zinc-200)]">Custom Agents:</strong> <code>/create:agent my-agent</code>. Define constraints, tool access, delegation rules.</li>
                <li><strong class="text-[var(--zinc-200)]">Custom Commands:</strong> two-layer (.md + .yaml). Optimize to &lt;=600 lines.</li>
                <li><strong class="text-[var(--zinc-200)]">Template System:</strong> 81 templates across CORE + ADDENDUM v2.2. Update once, inherit everywhere.</li>
              </ul>
              <p class="text-[var(--zinc-400)] text-sm leading-relaxed max-w-3xl border-l-2 border-accent pl-4 italic">
                Philosophy: Convention over configuration. Templates provide structure. You own the content. The framework adapts to your project.
              </p>
            </div>
          </section>

          <!-- 11 Configuration -->
          <section id="configuration" class="space-y-10 reveal pt-4">
            <div class="inline-flex items-center gap-3 border border-[var(--border)] bg-[var(--surface)] px-3 py-1.5 rounded-full text-[10px] font-semibold tracking-widest text-[var(--zinc-200)] mb-2">
              <span class="w-1.5 h-1.5 rounded-full bg-accent"></span> 11 // CONFIGURATION
            </div>

            <div class="grid grid-cols-1 xl:grid-cols-2 gap-8">
              <div class="space-y-6">
                <h3 class="text-[10px] font-semibold tracking-widest text-[var(--text-muted)] uppercase">Embedding Providers</h3>
                <div class="glass-card p-6 mono text-[10px] space-y-4">
                  <div class="flex flex-col gap-1 border-b border-[var(--border)] pb-3">
                    <div class="flex justify-between"><span class="font-semibold text-[var(--zinc-200)]">Voyage AI</span><span class="text-[var(--text-muted)]">1024 dims</span></div>
                    <span class="text-[var(--zinc-500)]">Recommended: best quality (VOYAGE_API_KEY)</span>
                  </div>
                  <div class="flex flex-col gap-1 border-b border-[var(--border)] pb-3">
                    <div class="flex justify-between"><span class="font-semibold text-[var(--zinc-300)]">OpenAI</span><span class="text-[var(--text-muted)]">1536/3072 dims</span></div>
                    <span class="text-[var(--zinc-500)]">Cloud-based alternative (OPENAI_API_KEY)</span>
                  </div>
                  <div class="flex flex-col gap-1">
                    <div class="flex justify-between"><span class="font-semibold text-[var(--zinc-300)]">HF Local</span><span class="text-[var(--text-muted)]">768 dims</span></div>
                    <span class="text-[var(--success)]">Privacy, offline, free (Default fallback)</span>
                  </div>
                </div>
              </div>

              <div class="h-full flex flex-col space-y-6">
                <h3 class="text-[10px] font-semibold tracking-widest text-[var(--text-muted)] uppercase">Config File (opencode.json)</h3>
                <div class="relative group code-window rounded-xl overflow-hidden border border-[var(--border)] bg-[var(--surface)] shadow-2xl h-full flex flex-col">
                  <div class="absolute top-0 left-0 w-full h-9 bg-[var(--surface-l3-alpha)] backdrop-blur border-b border-[var(--border-light)] flex items-center px-4 z-10">
                    <div class="ml-auto flex items-center gap-3">
                      <span class="text-[9px] font-semibold tracking-widest text-[var(--text-muted)] uppercase">json</span>
                      <button class="text-[var(--text-muted)] hover:text-[var(--text)] transition-colors flex items-center"><iconify-icon icon="lucide:copy" class="text-xs"></iconify-icon></button>
                    </div>
                  </div>
                  <pre class="p-5 pt-14 text-[11px] text-[var(--zinc-300)] mono overflow-x-auto leading-relaxed flex-1"><code>{
  <span class="text-[var(--success)]">"mcpServers"</span>: {
    <span class="text-[var(--success)]">"sequential-thinking"</span>: { <span class="text-[var(--zinc-500)]">"..."</span> },
    <span class="text-[var(--success)]">"spec_kit_memory"</span>: { <span class="text-[var(--zinc-500)]">"..."</span> },
    <span class="text-[var(--success)]">"code-mode"</span>: { <span class="text-[var(--zinc-500)]">"..."</span> }
  }
}</code></pre>
                </div>
              </div>
            </div>
          </section>

          <!-- 12 Usage Examples -->
          <section id="usage-examples" class="space-y-10 reveal pt-4">
            <div class="inline-flex items-center gap-3 border border-[var(--border)] bg-[var(--surface)] px-3 py-1.5 rounded-full text-[10px] font-semibold tracking-widest text-[var(--zinc-200)] mb-2">
              <span class="w-1.5 h-1.5 rounded-full bg-accent"></span> 12 // USAGE EXAMPLES
            </div>
            
            <div class="space-y-8">
              <p class="text-[var(--zinc-400)] text-sm leading-relaxed max-w-3xl">
                Real workflows, not toy examples.
              </p>
            </div>

            <div class="grid grid-cols-1 xl:grid-cols-2 gap-8 pt-4">
              <div class="space-y-6">
                <h3 class="text-[10px] font-semibold tracking-widest text-[var(--text-muted)] uppercase">Feature Development</h3>
                <div class="relative group code-window rounded-xl overflow-hidden border border-[var(--border)] bg-[var(--surface)] shadow-2xl h-full flex flex-col">
                  <div class="absolute top-0 left-0 w-full h-9 bg-[var(--surface-l3-alpha)] backdrop-blur border-b border-[var(--border-light)] flex items-center px-4 z-10">
                    <div class="ml-auto flex items-center gap-3">
                      <span class="text-[9px] font-semibold tracking-widest text-[var(--text-muted)] uppercase">bash</span>
                    </div>
                  </div>
                  <pre class="p-5 pt-14 text-[11px] text-[var(--zinc-300)] mono overflow-x-auto leading-relaxed flex-1"><code><span class="text-[var(--zinc-500)]"># 1. Start with a plan</span>
<span class="text-[var(--zinc-200)]">/spec_kit:plan</span> "add rate limiting to API"

<span class="text-[var(--zinc-500)]"># 2. Review and approve, then implement</span>
<span class="text-[var(--zinc-200)]">/spec_kit:implement</span>

<span class="text-[var(--zinc-500)]"># 3. Save context for future reference</span>
<span class="text-[var(--zinc-200)]">/memory:save</span>

<span class="text-[var(--zinc-500)]"># 4. Next week, pick up where you left off</span>
<span class="text-[var(--zinc-200)]">/spec_kit:resume</span></code></pre>
                </div>
              </div>

              <div class="space-y-6">
                <h3 class="text-[10px] font-semibold tracking-widest text-[var(--text-muted)] uppercase">Debugging</h3>
                <div class="relative group code-window rounded-xl overflow-hidden border border-[var(--border)] bg-[var(--surface)] shadow-2xl h-full flex flex-col">
                  <div class="absolute top-0 left-0 w-full h-9 bg-[var(--surface-l3-alpha)] backdrop-blur border-b border-[var(--border-light)] flex items-center px-4 z-10">
                    <div class="ml-auto flex items-center gap-3">
                      <span class="text-[9px] font-semibold tracking-widest text-[var(--text-muted)] uppercase">bash</span>
                    </div>
                  </div>
                  <pre class="p-5 pt-14 text-[11px] text-[var(--zinc-300)] mono overflow-x-auto leading-relaxed flex-1"><code><span class="text-[var(--zinc-500)]"># After 3+ failed attempts at fixing an issue:</span>
<span class="text-[var(--zinc-200)]">/spec_kit:debug</span>

<span class="text-[var(--zinc-500)]"># -> Prompts: "Select model: Opus / Sonnet / Gemini"</span>
<span class="text-[var(--zinc-500)]"># -> Dispatches @debug agent with 4-phase methodology</span>
<span class="text-[var(--zinc-500)]"># -> Observe -> Analyze -> Hypothesize -> Fix</span>
<span class="text-[var(--zinc-500)]"># -> Fresh perspective, no prior assumptions</span></code></pre>
                </div>
              </div>
            </div>
          </section>

          <!-- 13 Troubleshooting -->
          <section id="troubleshooting" class="space-y-10 reveal pt-4">
            <div class="inline-flex items-center gap-3 border border-[var(--border)] bg-[var(--surface)] px-3 py-1.5 rounded-full text-[10px] font-semibold tracking-widest text-[var(--zinc-200)] mb-2">
              <span class="w-1.5 h-1.5 rounded-full bg-accent"></span> 13 // TROUBLESHOOTING
            </div>
            
            <div class="grid grid-cols-1 xl:grid-cols-2 gap-8 pt-4">
              <div class="space-y-6">
                <h3 class="text-[10px] font-semibold tracking-widest text-[var(--text-muted)] uppercase">Quick Fixes</h3>
                <div class="overflow-hidden border border-[var(--border)] rounded-xl bg-[var(--surface)] shadow-lg">
                  <div class="overflow-x-auto">
                    <table class="w-full text-left text-[11px] mono whitespace-nowrap">
                      <tbody class="divide-y divide-[rgba(255,255,255,0.05)]">
                        <tr class="hover:bg-[var(--border-faint)] transition-colors">
                          <td class="py-4 px-5 text-[var(--zinc-300)] font-semibold">Server won't start</td>
                          <td class="py-4 px-5 text-[var(--zinc-400)]"><code>npm run build</code> in spec kit dir</td>
                        </tr>
                        <tr class="hover:bg-[var(--border-faint)] transition-colors">
                          <td class="py-4 px-5 text-[var(--zinc-300)] font-semibold">Context full</td>
                          <td class="py-4 px-5 text-[var(--zinc-200)]">/memory:continue</td>
                        </tr>
                        <tr class="hover:bg-[var(--border-faint)] transition-colors">
                          <td class="py-4 px-5 text-[var(--zinc-300)] font-semibold">Stale results</td>
                          <td class="py-4 px-5 text-[var(--zinc-200)]">/memory:manage cleanup</td>
                        </tr>
                        <tr class="hover:bg-[var(--border-faint)] transition-colors">
                          <td class="py-4 px-5 text-[var(--zinc-300)] font-semibold">Validation fails</td>
                          <td class="py-4 px-5 text-[var(--zinc-400)]">Check exit code: 0=pass, 2=error</td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>

              <div class="space-y-6">
                <h3 class="text-[10px] font-semibold tracking-widest text-[var(--text-muted)] uppercase">Diagnostic Commands</h3>
                <div class="relative group code-window rounded-xl overflow-hidden border border-[var(--border)] bg-[var(--surface)] shadow-2xl h-full flex flex-col">
                  <div class="absolute top-0 left-0 w-full h-9 bg-[var(--surface-l3-alpha)] backdrop-blur border-b border-[var(--border-light)] flex items-center px-4 z-10">
                    <div class="ml-auto flex items-center gap-3">
                      <span class="text-[9px] font-semibold tracking-widest text-[var(--text-muted)] uppercase">bash</span>
                    </div>
                  </div>
                  <pre class="p-5 pt-14 text-[11px] text-[var(--zinc-300)] mono overflow-x-auto leading-relaxed flex-1"><code><span class="text-[var(--zinc-500)]"># Check memory system health</span>
<span class="text-[var(--zinc-200)]">/memory:manage</span> health

<span class="text-[var(--zinc-500)]"># View memory statistics</span>
<span class="text-[var(--zinc-200)]">/memory:manage</span> stats

<span class="text-[var(--zinc-500)]"># Test build</span>
<span class="text-[var(--zinc-200)]">cd</span> .opencode/skill/system-spec-kit && <span class="text-[var(--zinc-200)]">npm run</span> test:cli</code></pre>
                </div>
              </div>
            </div>
          </section>

          <!-- 14 FAQ -->
          <section id="faq" class="space-y-10 reveal pt-4">
            <div class="inline-flex items-center gap-3 border border-[var(--border)] bg-[var(--surface)] px-3 py-1.5 rounded-full text-[10px] font-semibold tracking-widest text-[var(--zinc-200)] mb-2">
              <span class="w-1.5 h-1.5 rounded-full bg-accent"></span> 14 // FAQ
            </div>
            
            <div class="space-y-6 pt-4">
              <div class="glass-card p-6 shadow-lg">
                <p class="text-sm font-semibold mb-2 text-[var(--zinc-200)]">Q: Do I need API keys to use the memory system?</p>
                <p class="text-xs text-[var(--text-muted)] leading-relaxed">A: No. HuggingFace Local runs on your machine with no API
                  keys needed. It's the default fallback. Voyage AI and OpenAI are optional upgrades for better
                  retrieval quality.</p>
              </div>
              <div class="glass-card p-6 shadow-lg">
                <p class="text-sm font-semibold mb-2 text-[var(--zinc-200)]">Q: How is this different from Cursor's memory or
                  Copilot's context?</p>
                <p class="text-xs text-[var(--text-muted)] leading-relaxed">A: Those are session-scoped. This system persists across
                  sessions, models and even projects. It uses causal graphs to trace decision lineage and cognitive
                  tiers to prioritize relevance. It uses ANCHOR format for 93% token savings. It's also local-first.
                  Your code stays on your machine.</p>
              </div>
              <div class="glass-card p-6 shadow-lg">
                <p class="text-sm font-semibold mb-2 text-[var(--zinc-200)]">Q: Is this overkill for solo developers?</p>
                <p class="text-xs text-[var(--text-muted)] leading-relaxed">A: You might think so, until you lose 3 hours re-debugging
                  an issue you already solved last month. Solo developers benefit more because there's no team to ask
                  "hey, why did we do it this way?" The memory system is your institutional knowledge.</p>
              </div>
              <div class="glass-card p-6 shadow-lg">
                <p class="text-sm font-semibold mb-2 text-[var(--zinc-200)]">Q: Can I switch embedding providers without losing
                  data?</p>
                <p class="text-xs text-[var(--text-muted)] leading-relaxed">A: Each provider uses a separate SQLite database file, so
                  switching is safe. Your old embeddings remain intact. Re-index with <code>memory_index_scan</code> if
                  you want to regenerate embeddings with a new provider.</p>
              </div>
            </div>
          </section>

          <!-- 15 Related Documents -->
          <section id="related-documents" class="space-y-10 reveal pt-4">
            <div class="inline-flex items-center gap-3 border border-[var(--border)] bg-[var(--surface)] px-3 py-1.5 rounded-full text-[10px] font-semibold tracking-widest text-[var(--zinc-200)] mb-2">
              <span class="w-1.5 h-1.5 rounded-full bg-accent"></span> 15 // RELATED DOCUMENTS
            </div>
            
            <div class="grid grid-cols-1 xl:grid-cols-2 gap-8 pt-4">
              <div class="space-y-6">
                <h3 class="text-[10px] font-semibold tracking-widest text-[var(--text-muted)] uppercase">Internal Documentation</h3>
                <div class="flex flex-col gap-3">
                  <a href="#" class="p-4 border border-[var(--border)] bg-[var(--surface)] rounded-xl text-xs hover:border-accent transition-all flex justify-between items-center group shadow-lg">
                    <span class="font-mono text-[var(--zinc-300)] group-hover:text-[var(--zinc-200)] transition-colors">Spec Kit README</span>
                    <iconify-icon icon="lucide:arrow-right" class="text-[var(--text-muted)] group-hover:text-[var(--zinc-200)] transition-colors"></iconify-icon>
                  </a>
                  <a href="#" class="p-4 border border-[var(--border)] bg-[var(--surface)] rounded-xl text-xs hover:border-accent transition-all flex justify-between items-center group shadow-lg">
                    <span class="font-mono text-[var(--zinc-300)] group-hover:text-[var(--zinc-200)] transition-colors">AGENTS.md Config</span>
                    <iconify-icon icon="lucide:arrow-right" class="text-[var(--text-muted)] group-hover:text-[var(--zinc-200)] transition-colors"></iconify-icon>
                  </a>
                  <a href="#" class="p-4 border border-[var(--border)] bg-[var(--surface)] rounded-xl text-xs hover:border-accent transition-all flex justify-between items-center group shadow-lg">
                    <span class="font-mono text-[var(--zinc-300)] group-hover:text-[var(--zinc-200)] transition-colors">Install Guides</span>
                    <iconify-icon icon="lucide:arrow-right" class="text-[var(--text-muted)] group-hover:text-[var(--zinc-200)] transition-colors"></iconify-icon>
                  </a>
                </div>
              </div>
              <div class="space-y-6">
                <h3 class="text-[10px] font-semibold tracking-widest text-[var(--text-muted)] uppercase">Changelog Indices</h3>
                <div class="grid grid-cols-2 gap-3 text-[10px] mono">
                  <div class="p-3 border border-[var(--border)] bg-[var(--surface)] rounded text-[var(--text-muted)] shadow-lg">00 OpenCode Env (107)</div>
                  <div class="p-3 border border-[var(--border)] bg-[var(--surface)] rounded text-[var(--text-muted)] shadow-lg">01 Spec Kit (68)</div>
                  <div class="p-3 border border-[var(--border)] bg-[var(--surface)] rounded text-[var(--text-muted)] shadow-lg">02 Agents.md (30)</div>
                  <div class="p-3 border border-[var(--border)] bg-[var(--surface)] rounded text-[var(--text-muted)] shadow-lg">03 Orchestration (34)</div>
                  <div class="p-3 border border-[var(--border)] bg-[var(--surface)] rounded text-[var(--text-muted)] shadow-lg">04 Commands (34)</div>
                  <div class="p-3 border border-[var(--border)] bg-[var(--surface)] rounded text-[var(--text-muted)] shadow-lg">13 MCP Code Mode (8)</div>
                </div>
              </div>
            </div>
          </section>

          <!-- Footer -->
          <footer class="pt-20 border-t border-[var(--border-light)] flex flex-col md:flex-row justify-between items-start md:items-center gap-8 mt-20">
            <div class="space-y-1">
              <p class="text-[10px] font-semibold tracking-widest text-[var(--zinc-400)] uppercase">SpecKit Protocol Control</p>
              <p class="text-[9px] mono text-[var(--text-muted)]">Integrity_Hash: 0x82f63b_System_Ref_v2.4_Final</p>
            </div>
            <div class="text-left md:text-right space-y-1">
              <p class="text-[10px] font-semibold tracking-widest text-[var(--zinc-400)] uppercase">© 2026 OpenCode Infrastructure</p>
              <p class="text-[9px] mono text-[var(--text-muted)]">End of Transmission Ledger</p>
            </div>
          </footer>

        </main>

        <!-- Right Sidebar: On this page -->
        <aside class="right-sidebar">
          <div class="sticky top-24 space-y-6 overflow-y-auto max-h-[calc(100vh-6rem)] pb-8 pr-2">
            <p class="text-[9px] font-semibold tracking-[0.2em] text-[var(--text-muted)] uppercase">On this page</p>
            <nav id="sidebar-nav" class="flex flex-col gap-1.5">
              <a href="#overview" id="nav-overview" class="toc-link active">1. Overview</a>
              <a href="#quickstart" id="nav-quickstart" class="toc-link">2. Quick Start</a>
              <a href="#spec-kit-documentation" id="nav-spec-kit-documentation" class="toc-link">3. Spec Kit Documentation</a>
              <a href="#memory-engine" id="nav-memory-engine" class="toc-link">4. Memory Engine</a>
              <a href="#agent-network" id="nav-agent-network" class="toc-link">5. Agent Network</a>
              <a href="#command-architecture" id="nav-command-architecture" class="toc-link">6. Command Architecture</a>
              <a href="#skills-library" id="nav-skills-library" class="toc-link">7. Skills Library</a>
              <a href="#gate-system" id="nav-gate-system" class="toc-link">8. Gate System</a>
              <a href="#code-mode-mcp" id="nav-code-mode-mcp" class="toc-link">9. Code Mode MCP</a>
              <a href="#extensibility" id="nav-extensibility" class="toc-link">10. Extensibility</a>
              <a href="#configuration" id="nav-configuration" class="toc-link">11. Configuration</a>
              <a href="#usage-examples" id="nav-usage-examples" class="toc-link">12. Usage Examples</a>
              <a href="#troubleshooting" id="nav-troubleshooting" class="toc-link">13. Troubleshooting</a>
              <a href="#faq" id="nav-faq" class="toc-link">14. FAQ</a>
              <a href="#related-documents" id="nav-related-documents" class="toc-link">15. Related Documents</a>
            </nav>
            <div class="pt-6 border-t border-[var(--border-light)] space-y-3">
              <p class="text-[9px] font-semibold tracking-[0.2em] text-[var(--text-muted)] uppercase">Actions</p>
              <a href="#" class="text-xs text-[var(--zinc-400)] hover:text-[var(--text)] transition-colors flex items-center gap-2"><iconify-icon icon="lucide:pencil-line"></iconify-icon> Edit this page</a>
              <a href="#" class="text-xs text-[var(--zinc-400)] hover:text-[var(--text)] transition-colors flex items-center gap-2"><iconify-icon icon="lucide:message-square"></iconify-icon> Give feedback</a>
            </div>
          </div>
        </aside>

      </div>
    </div>
  </div>

  <script>
    function updateClock() {
      const now = new Date();
      now.setHours(now.getHours() + 1);
      const timeStr = now.toISOString().split('T')[1].split('.')[0] + ' CET';
      const clockEl = document.getElementById('clock');
      if (clockEl) clockEl.textContent = timeStr;
    }
    setInterval(updateClock, 1000);
    updateClock();

    // Scroll Progress
    window.addEventListener('scroll', () => {
      const winScroll = document.body.scrollTop || document.documentElement.scrollTop;
      const height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
      const scrolled = (winScroll / height) * 100;
      const progress = document.getElementById('scroll-progress');
      if (progress) progress.style.width = scrolled + "%";
    });

    const initObservers = () => {
      const revealObserver = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            entry.target.classList.add('active');
            const bars = entry.target.querySelectorAll('.viz-fill');
            bars.forEach(bar => {
              bar.style.width = bar.getAttribute('data-width');
            });
          }
        });
      }, { threshold: 0.1 });

      document.querySelectorAll('.reveal').forEach(el => revealObserver.observe(el));

      const navLinks = document.querySelectorAll('.toc-link');
      const sections = document.querySelectorAll('section[id]');

      const navObserver = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            const id = entry.target.getAttribute('id');
            navLinks.forEach(link => {
              link.classList.toggle('active', link.getAttribute('href') === `#${id}`);
            });
          }
        });
      }, { rootMargin: '-20% 0px -70% 0px' });

      sections.forEach(section => navObserver.observe(section));
    };

    window.addEventListener('DOMContentLoaded', initObservers);
  </script>
</body>
</html>
